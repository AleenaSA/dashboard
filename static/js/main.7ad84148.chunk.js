(this["webpackJsonpdashboard-v1"]=this["webpackJsonpdashboard-v1"]||[]).push([[0],{151:function(e){e.exports=JSON.parse('[{"name":"identity","type":"str"},{"name":"yaml_path","type":"str"},{"name":"image","type":"str"},{"name":"entrypoint","type":"str"},{"name":"pull_latest","type":"bool"},{"name":"volumes","type":"str"},{"name":"port_in","type":"int"},{"name":"port_out","type":"int"},{"name":"host_in","type":"str"},{"name":"host_out","type":"str"},{"name":"socket_in","type":"SocketType"},{"name":"socket_out","type":"SocketType"},{"name":"port_ctrl","type":"int"},{"name":"ctrl_with_ipc","type":"bool"},{"name":"timeout","type":"int"},{"name":"timeout_ctrl","type":"int"},{"name":"timeout_ready","type":"int"},{"name":"dump_interval","type":"int"},{"name":"exit_no_dump","type":"bool"},{"name":"read_only","type":"bool"},{"name":"separated_workspace","type":"bool"},{"name":"replica_id","type":"int"},{"name":"check_version","type":"bool"},{"name":"array_in_pb","type":"bool"},{"name":"num_part","type":"int"},{"name":"memory_hwm","type":"int"},{"name":"runtime","type":"str"},{"name":"max_idle_time","type":"int"},{"name":"log_sse","type":"bool"},{"name":"log_remote","type":"bool"},{"name":"log_profile","type":"bool"},{"name":"host","type":"str"},{"name":"port_grpc","type":"int"},{"name":"max_message_size","type":"int"},{"name":"proxy","type":"bool"},{"name":"replicas","type":"int"},{"name":"replica_type","type":"ReplicaType"},{"name":"shutdown_idle","type":"bool"}]')},192:function(e,t,a){e.exports=a.p+"static/media/jina-light.07aba578.svg"},247:function(e,t,a){e.exports=a(475)},252:function(e,t,a){},277:function(e,t){e.exports={nodeOffset:{x:250,y:150}}},473:function(e,t,a){},474:function(e,t,a){},475:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),l=a(30),c=a.n(l),s=(a(252),a(35)),i=a(62),u=a(14),m=a(16),d=a(15),p=a(482),g=a(483),h=a(233),f=a(486),b=a(485),v=a(481),E=a(227),y=a.n(E),C=new(a(228).Dispatcher),w=a(98),O=a.n(w),N=a(161),S=a(28),k=a(229),_=a(51),x=a.n(_),L=a(25),T=a(265),j=a(277),A=a(151),I={};function D(e){try{return e=e.replace("!Flow",""),{data:T.parse(e)}}catch(t){return alert("Error Parsing YAML:\n"+t),{error:t}}}function R(e,t){var a={offset:{x:0,y:0},nodes:{},links:{},selected:{},hovered:{}},n={},r={},o=!1;Object.keys(e).map((function(a){var l=e[a]||{},c={id:a,label:a,ports:{},needs:{},send_to:{},position:{},properties:Object(L.a)({},l)};if(c.properties.needs&&delete c.properties.needs,c.ports.inPort={id:"inPort",type:"input"},c.ports.outPort={id:"outPort",type:"output"},o&&!l.needs&&(l.needs=o),l.needs)for(var s=Array.isArray(l.needs)?l.needs:[l.needs],i=0;i<s.length;++i){var u=s[i];c.needs[u]=!0;var m="".concat(u,"-to-").concat(a),d={color:"red",id:m,from:{nodeId:u,portId:"outPort"},to:{nodeId:a,portId:"inPort"}};r[m]=d}if(t&&t[a]){var p=t[a],g=p.x,h=p.y;c.position={x:parseInt(g),y:parseInt(h)}}n[a]=c,o=a}));var l={},c=j.nodeOffset.x,s=j.nodeOffset.y;return Object.keys(n).map((function(e){var t=function e(t,a,n){for(var r=Object.keys(t[a].needs),o=0,l=0;l<r.length;++l){var c=r[l],s=void 0;(s=t[c].depth?t[c].depth+1:e(t,c,1))>o&&(o=s)}return n+o}(n,e,0);n[e].depth=t,l[t]>=0?l[t]++:l[t]=0,n[e].position.x||(n[e].position={y:t*s+s,x:l[t]*c+c})})),a.nodes=n,a.links=r,a}A.map((function(e){return I[e.name]=e.type}));var M=function(e,t){var a=!1;n&&(a=!0,n.close());var r="".concat(e.host,":").concat(e.port).concat(e.log.startsWith("/")?e.log:"/"+e.log);console.log("logs connectionString: ",r),(n=new EventSource(r)).onopen=function(){t({type:"connect",data:"Connection ".concat(a?"re-":"","established at ").concat(e.host,":").concat(e.port)})},n.onmessage=function(e){t({type:"log",data:JSON.parse(e.data)})},n.onerror=function(e){t({type:"error",data:"Could not get log data from ".concat(r)}),n.close()}},B=function(e){return new Promise((function(t,a){var n=new XMLHttpRequest;console.log("YAML connectionString: ",e),n.open("GET",e),n.timeout=5e3,n.onload=function(){this.status>=200&&this.status<300?t(n.response):a({status:this.status,statusText:n.statusText})},n.onerror=function(){a({status:this.status,statusText:n.statusText})},n.send()}))},P=a(151),W=G(),H=["INFO","SUCCESS","WARNING","ERROR","CRITICAL","DEBUG"];function G(){return{settings:{host:localStorage.getItem("preferences-host")||"http://localhost",port:localStorage.getItem("preferences-port")||5e3,log:localStorage.getItem("preferences-log")||"/stream/log",profile:localStorage.getItem("preferences-profile")||"/stream/profile",yaml:localStorage.getItem("preferences-yaml")||"/data/yaml",shutdown:localStorage.getItem("preferences-shutdown")||"/action/shutdown",ready:localStorage.getItem("preferences-ready")||"/status/ready"},banner:{flow:!1,logs:!1},connected:{logs:!1,flow:!1},loading:!0,modal:!1,menuVisible:!1,navItems:[{title:"Navigation",items:[{title:"Home",to:"/home",htmlBefore:'<i class="material-icons">home</i>',htmlAfter:""},{title:"Log Stream",to:"/logs",htmlBefore:'<i class="material-icons">insert_comment</i>',htmlAfter:""},{title:"Flow Design",to:"/flow",htmlBefore:'<i class="material-icons">device_hub</i>',htmlAfter:""},{title:"Hub",to:"/hub",htmlBefore:'<i class="material-icons">store</i>',htmlAfter:""},{title:"Settings",to:"/settings",htmlBefore:'<i class="material-icons">settings</i>',htmlAfter:""},{title:"Help",to:"/help",htmlBefore:'<i class="material-icons">help</i>',htmlAfter:""}]}],flowchart:{selected:{},hovered:{},nodes:{},links:{},offset:{x:0,y:0}},logs:{all:[]},logSources:{},occurences:{current:{},previous:{},lastLog:[]},logIndex:!1,summaryCharts:{},selectedNode:null,modalParams:null,currentTab:"logStream"}}var U=new(function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).registerActions=function(t){var a=t.actionType,n=t.payload;switch(a){case x.a.TOGGLE_SIDEBAR:e.toggleSidebar();break;case x.a.SHOW_MODAL:e.showModal(n);break;case x.a.IMPORT_CUSTOM_YAML:e.importCustomYAML(n);break;case x.a.CLOSE_MODAL:e.closeModal();break;case x.a.SHOW_LOG_AT_INDEX:e.showLogAtIndex(n);break;case x.a.SAVE_SETTINGS:e.saveSettings(n);break;case x.a.RECONNECT:e.reconnect(n)}},e.init=Object(N.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.updateChartInterval&&clearInterval(e.updateChartInterval),W=G(),console.log("store settings: ",W.settings),t.next=5,e.initFlowChart();case 5:e.initLogStream(),e.initCharts(),W.loading=!1,e.emit("update-ui"),e.emit("update-settings");case 10:case"end":return t.stop()}}),t)}))),e.initFlowChart=function(){var t=Object(N.a)(O.a.mark((function t(a){var n,r,o,l,c,s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=W.settings,o="".concat(r.host,":").concat(r.port).concat(r.yaml.startsWith("/")?r.yaml:"/"+r.yaml),!a){t.next=7;break}n=D(a),W.connected.flow=!1,t.next=21;break;case 7:return t.prev=7,t.next=10,B(o);case 10:l=t.sent,n=D(l),W.connected.flow=!0,e.showBanner("flow","Getting YAML from ".concat(o),"success"),t.next=21;break;case 16:return t.prev=16,t.t0=t.catch(7),W.connected.flow=!1,e.showBanner("flow","Could not get YAML flow from ".concat(o),"error"),t.abrupt("return");case 21:try{c=n.data.with.board.canvas}catch(i){console.log("could not find canvas"),c={}}console.log("pods: ",n.data.pods),s=R(n.data.pods,c),console.log("parsed: ",s),s.with=n.data.with,W.flowchart=s,e.emit("update-ui"),e.emit("update-flowchart");case 29:case"end":return t.stop()}}),t,null,[[7,16]])})));return function(e){return t.apply(this,arguments)}}(),e.initLogStream=function(){M(W.settings,(function(t){var a=t.type,n=t.data;if("connect"===a)return W.connected.logs=!0,e.showBanner("logs",n,"success");if("error"===a)return W.connected.logs=!1,e.showBanner("logs",n,"error");var r=n;r.formattedTimestamp=new Date(1e3*r.created).toLocaleString(),r.idx=W.logs.all.length,W.logs.all.push(r);var o=r.name;W.logs[o]?W.logs[o].push(r):W.logs[o]=[r],W.logSources[o]=!0,H.includes(r.levelname)&&W.occurences.current[r.levelname]++,e.emit("update-logs")}))},e.initCharts=function(){H.map((function(e){W.occurences.current[e]=0,W.occurences.previous[e]=0,W.summaryCharts[e]=new Array(60).fill(0)})),W.occurences.lastLog=new Array(60).fill({}),console.log("initial Occurences: ",W.occurences),console.log("initial summary charts: ",W.summaryCharts),e.updateChartInterval=setInterval(e.updateSummaryCharts,1e3)},e.updateSummaryCharts=function(){var t=W.occurences,a=t.current,n=t.previous;t.indeces;H.map((function(e){var t=a[e],r=n[e];W.summaryCharts[e].push(t-r),W.summaryCharts[e].shift(),W.occurences.previous[e]=t})),W.occurences.lastLog.push(W.logs.all.length-1),W.occurences.lastLog.shift(),e.emit("update-summary-chart")},e.showLogAtIndex=function(t){console.log("index: ",t);var a=W.occurences.lastLog[t];console.log("logIndex: ",a),a&&(W.logIndex=W.occurences.lastLog[t],e.emit("show-log"))},e.importCustomYAML=function(t){e.initFlowChart(t),e.closeModal(),e.emit("update-flowchart")},e.saveSettings=function(t){Object.keys(t).map((function(e){localStorage.setItem("preferences-".concat(e),t[e])})),setTimeout(e.init,100)},e.showBanner=function(t,a,n){W.banner[t]={message:String(a),theme:n},setTimeout(e.hideBanner,5e3),e.emit("update-ui")},e.hideBanner=function(){W.banner={logs:!1,flow:!1},e.emit("update-ui")},e.showError=function(e){alert(e)},e.showModal=function(t){var a=t.modal,n=t.params;W.modal=a,W.modalParams=n,e.emit("update-ui")},e.closeModal=function(){W.modal=!1,W.modalParams="",e.emit("update-ui")},e.getCurrentTab=function(){return W.currentTab},e.getSettings=function(){return W.settings},e.getBanner=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"logs";return W.banner[e]},e.getModal=function(){return W.modal},e.getModalParams=function(){return W.modalParams},e.getLogs=function(){return W.logs},e.getLogSources=function(){return W.logSources},e.getSummaryCharts=function(){return W.summaryCharts},e.getOccurencesByName=function(){var e={};return Object.keys(W.logs).map((function(t){"all"!==t&&(e[t]=W.logs[t].length)})),e},e.getActivePanel=function(){var e=window.location.toString();return e.includes("flow")?"flow":e.includes("logs")?"logs":"neither"},e.getConnectionStatus=function(){var t=e.getActivePanel();return W.connected[t]},e.isLoading=function(){return W.loading},e.getFlowchart=function(){return W.flowchart},e.getAvailableProperties=function(){return P},e.getIndexedLog=function(){return W.logIndex},C.register(e.registerActions),e.init(),e}return Object(S.a)(a,[{key:"reconnect",value:function(){this.init()}},{key:"toggleSidebar",value:function(){W.menuVisible=!W.menuVisible,this.emit("update-ui")}},{key:"getMenuState",value:function(){return W.menuVisible}},{key:"getSidebarItems",value:function(){return W.navItems}}]),a}(k.EventEmitter)),F=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={},e.style={overlay:{backgroundColor:"rgba(38, 50, 56, 0.5)"},content:{border:"none",bottom:"auto",maxHeight:"80%",left:"50%",padding:"2rem",position:"fixed",right:"auto",top:"50%",transform:"translate(-50%,-50%)",width:"90%",maxWidth:"800px",overflow:"hidden"}},e.listenForEnter=function(t){13==t.charCode&&e.importYAML()},e.importYAML=function(){var t=e.inputRef.value;C.dispatch({actionType:x.a.IMPORT_CUSTOM_YAML,payload:t})},e.close=function(){C.dispatch({actionType:x.a.CLOSE_MODAL})},e.render=function(){var t=e.props.open;return o.a.createElement(y.a,{ariaHideApp:!1,isOpen:t,contentLabel:"Action Modal",className:"modal-content tiny-modal px-4 pt-3 pb-4",shouldCloseOnOverlayClick:!0,style:e.style,onRequestClose:e.close,closeTimeoutMS:100},o.a.createElement("div",{className:"modal-header p-0"},o.a.createElement("h4",null,o.a.createElement("b",null,"Import YAML")),o.a.createElement("h4",null,o.a.createElement("span",{className:"float-right close-icon"},o.a.createElement("i",{className:"material-icons",onClick:e.close},"close")))),o.a.createElement("div",{className:"modal-body px-0 pb-0"},o.a.createElement(b.a.Group,null,o.a.createElement(b.a.Label,null,"Custom YAML:"),o.a.createElement(b.a.Control,{placeholder:"Paste Here",ref:function(t){return e.inputRef=t},as:"textarea",rows:"10"}))),o.a.createElement(v.a,{className:"btn-primary",onClick:e.importYAML},"Continue"))},e}return a}(r.Component),Y=(o.a.Component,a(5)),z=a(3),V=a.n(z),J=function(){return o.a.createElement("div",{className:"main-navbar__search w-100 d-none d-md-flex d-lg-flex"})},K=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={connected:U.getConnectionStatus()},e.componentWillMount=function(){U.on("update-ui",e.getData)},e.componentWillUnmount=function(){U.removeListener("update-ui",e.getData)},e.getData=function(){var t=U.getConnectionStatus();e.setState({connected:t})},e.reconnect=function(){C.dispatch({actionType:x.a.RECONNECT})},e}return Object(S.a)(a,[{key:"render",value:function(){var e=this.state.connected;return o.a.createElement(Y.t,{className:"border-right dropdown notifications",onClick:this.reconnect},o.a.createElement(Y.u,{className:"nav-link-icon text-center",onClick:this.toggleNotifications},o.a.createElement("div",{className:"nav-link-icon__wrapper"},o.a.createElement("i",{className:"material-icons"},"language"),e?o.a.createElement(Y.a,{pill:!0,theme:"success",className:"connection-indicator p-1"},o.a.createElement("i",{className:"material-icons"},"done")):o.a.createElement(Y.a,{pill:!0,theme:"danger",className:"connection-indicator p-1"},o.a.createElement("i",{className:"material-icons"},"close")))))}}]),a}(o.a.Component),Q=a(34),X=(o.a.Component,function(){return o.a.createElement(Y.s,{navbar:!0,className:"border-left flex-row"},o.a.createElement(K,null))}),q=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleClick=n.handleClick.bind(Object(Q.a)(n)),n}return Object(S.a)(a,[{key:"handleClick",value:function(){C.dispatch({actionType:x.a.TOGGLE_SIDEBAR})}},{key:"render",value:function(){return o.a.createElement("nav",{className:"nav cursor-pointer"},o.a.createElement("span",{onClick:this.handleClick,className:"nav-link nav-link-icon toggle-sidebar d-sm-inline d-md-inline d-lg-none text-center"},o.a.createElement("i",{className:"material-icons"},"\ue5d2")))}}]),a}(o.a.Component),$=function(e){e.layout,e.stickyTop;var t=V()("main-navbar","bg-white","sticky-top");return o.a.createElement("div",{className:t},o.a.createElement(Y.i,{fluid:!0,className:"p-0"},o.a.createElement(Y.v,{type:"light",className:"align-items-stretch flex-md-nowrap p-0"},!1,o.a.createElement(J,null),o.a.createElement(X,null),o.a.createElement(q,null))))},Z=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleToggleSidebar=a.handleToggleSidebar.bind(Object(Q.a)(a)),a}return Object(S.a)(n,[{key:"handleToggleSidebar",value:function(){C.dispatch({actionType:x.a.TOGGLE_SIDEBAR})}},{key:"render",value:function(){this.props.hideLogoText;return o.a.createElement("div",{className:"main-navbar"},o.a.createElement(Y.v,{className:"align-items-stretch bg-white flex-md-nowrap border-bottom p-0",type:"light"},o.a.createElement(Y.w,{className:"w-100 mr-0",href:"#",style:{lineHeight:"25px"}},o.a.createElement("div",{className:"d-table m-auto"},o.a.createElement("img",{id:"main-logo",className:"d-inline-block align-top",style:{maxWidth:"50px"},src:a(192),alt:"Jina Dashboard"}))),o.a.createElement("a",{className:"toggle-sidebar d-sm-inline d-md-none d-lg-none",onClick:this.handleToggleSidebar},o.a.createElement("i",{className:"material-icons"},"\ue5c4"))))}}]),n}(o.a.Component),ee=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).toggleDropdown=n.toggleDropdown.bind(Object(Q.a)(n)),n}return Object(S.a)(a,[{key:"toggleDropdown",value:function(e){C.dispatch({actionType:x.a.TOGGLE_SIDEBAR_DROPDOWN,payload:e})}},{key:"render",value:function(){var e=this,t=this.props.item,a=t.items&&t.items.length;return o.a.createElement(Y.t,{style:{position:"relative"}},o.a.createElement(Y.u,{className:a&&"dropdown-toggle",tag:s.c,to:t.to,onClick:function(){return e.toggleDropdown(t)}},t.htmlBefore&&o.a.createElement("div",{className:"d-inline-block item-icon-wrapper",dangerouslySetInnerHTML:{__html:t.htmlBefore}}),t.title&&o.a.createElement("span",null,t.title),t.htmlAfter&&o.a.createElement("div",{className:"d-inline-block item-icon-wrapper",dangerouslySetInnerHTML:{__html:t.htmlAfter}})),a&&o.a.createElement(Y.h,{tag:Y.l,small:!0,open:t.open,style:{top:0}},t.items.map((function(e,t){return o.a.createElement(Y.k,{key:t,tag:s.c,to:e.to},e.title)}))))}}]),a}(o.a.Component),te=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={navItems:U.getSidebarItems()},n.onChange=n.onChange.bind(Object(Q.a)(n)),n}return Object(S.a)(a,[{key:"componentWillMount",value:function(){U.on("update-ui",this.onChange)}},{key:"componentWillUnmount",value:function(){U.removeListener("update-ui",this.onChange)}},{key:"onChange",value:function(){this.setState(Object(L.a)({},this.state,{navItems:U.getSidebarItems()}))}},{key:"render",value:function(){var e=this.state.navItems;return o.a.createElement("div",{className:"nav-wrapper"},e.map((function(e,t){return o.a.createElement("div",{key:t},o.a.createElement("h6",{className:"main-sidebar__nav-title"},e.title),"undefined"!==typeof e.items&&e.items.length&&o.a.createElement(Y.s,{className:"nav--no-borders flex-column"},e.items.map((function(e,t){return o.a.createElement(ee,{key:t,item:e})}))))})))}}]),a}(o.a.Component),ae=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={menuVisible:!1,sidebarNavItems:U.getSidebarItems()},n.onChange=n.onChange.bind(Object(Q.a)(n)),n}return Object(S.a)(a,[{key:"componentWillMount",value:function(){U.on("update-ui",this.onChange)}},{key:"componentWillUnmount",value:function(){U.removeListener("update-ui",this.onChange)}},{key:"onChange",value:function(){this.setState(Object(L.a)({},this.state,{menuVisible:U.getMenuState(),sidebarNavItems:U.getSidebarItems()}))}},{key:"render",value:function(){var e=V()("main-sidebar","px-0","col-12",this.state.menuVisible&&"open");return o.a.createElement(Y.g,{tag:"aside",className:e,lg:{size:2},md:{size:3}},o.a.createElement(Z,{hideLogoText:this.props.hideLogoText}),o.a.createElement(te,null))}}]),a}(o.a.Component),ne=function(e){e.contained;var t=e.menuItems,a=e.copyright;return o.a.createElement("footer",{className:"main-footer d-flex p-2 px-3 bg-white border-top"},o.a.createElement(Y.i,{fluid:!0},o.a.createElement(Y.x,null,o.a.createElement(Y.s,null,t.map((function(e,t){return o.a.createElement(Y.t,{key:t},o.a.createElement(Y.u,{tag:s.b,to:e.to},e.title))}))),o.a.createElement("span",{className:"copyright ml-auto my-auto mr-2"},a))))};ne.defaultProps={contained:!1,copyright:"Copyright \xa9 Jina AI Limited",menuItems:[{title:"Home",to:"#"},{title:"Products",to:"#"},{title:"Learn",to:"#"},{title:"Community",to:"#"},{title:"Blog",to:"#"},{title:"Jobs",to:"#"}]};var re=ne,oe=function(e){var t=e.children,a=e.noNavbar,n=e.noFooter;return o.a.createElement(Y.i,{fluid:!0},o.a.createElement(Y.x,null,o.a.createElement(ae,null),o.a.createElement(Y.g,{className:"main-content p-0",lg:{size:10,offset:2},md:{size:9,offset:3},sm:"12",tag:"main"},!a&&o.a.createElement($,null),t,!n&&o.a.createElement(re,null))))},le=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={modal:U.getModal(),loading:U.isLoading()},e.componentWillMount=function(){U.on("update-ui",e.getData)},e.componentWillUnmount=function(){U.removeListener("update-ui",e.getData)},e.getData=function(){var t=U.getModal(),a=U.isLoading();e.setState({modal:t,loading:a})},e.render=function(){var t=e.state,a=t.modal,n=(t.loading,e.props),r=n.noNavbar,l=n.children,c=n.noFooter;return o.a.createElement(Y.i,{fluid:!0,className:"icon-sidebar-nav"},o.a.createElement(Y.x,null,o.a.createElement(ae,{hideLogoText:!0}),o.a.createElement(Y.g,{className:"main-content col",tag:"main"},!r&&o.a.createElement($,null),l,!c&&o.a.createElement(re,null))),o.a.createElement(F,{open:"import"===a}))},e}return a}(o.a.Component);le.defaultProps={noNavbar:!1,noFooter:!1};var ce=le,se=a(160),ie=a(43),ue=a(95),me=a(245),de=function(e){var t=e.title,a=e.subtitle,n=e.className,r=Object(me.a)(e,["title","subtitle","className"]),l=V()(n,"text-center","text-md-left","mb-sm-0");return o.a.createElement(Y.g,Object.assign({xs:"12",sm:"4",className:l},r),o.a.createElement("span",{className:"text-uppercase page-subtitle"},a),o.a.createElement("h3",{className:"page-title"},t))},pe=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).render=function(){var e=n.props,t=e.label,a=e.type,o=e.ports,l=e.properties;return r.createElement("div",{ref:n.ref,className:"draggable-item",draggable:!0,onDragStart:function(e){e.dataTransfer.setData(ie.REACT_FLOW_CHART,JSON.stringify({label:t,type:a,ports:o,properties:l}))}},a)},n.ref=r.createRef(),n}return a}(r.Component),ge=a(232),he=a(487),fe=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={availableProperties:U.getAvailableProperties(),node:{}},e.componentWillReceiveProps=function(t){var a=t.chart,n=a.selected,r=a.nodes,o=n.id,l=n.type;if(o!==e.state.node.id&&o&&"node"===l&&o!=e.state.node.id){var c=r[o];e.setInitialNode(c)}},e.setInitialNode=function(t){var a={},n=t.label;Object.keys(t.properties).map((function(e){a[e]=t.properties[e]})),e.setState({node:{label:n,id:t.id,properties:a,newProperties:{}}})},e.updateLabel=function(t){e.setState((function(e){var a=e.node;return a.label=t,{node:a}}),e.saveChanges)},e.updateExistingValue=function(t,a){e.setState((function(e){var n=e.node;return n.properties[t]=a,{node:n}}),e.saveChanges)},e.updateNewValue=function(t,a){e.setState((function(e){var n=e.node;return n.newProperties[t]=a,{node:n}}),e.saveChanges)},e.saveChanges=function(){var t=e.state.node;e.props.updateNode(t)},e.renderEditNode=function(){var t=e.state,a=t.availableProperties,n=t.node;return o.a.createElement("div",{className:"h-100 d-flex flex-column"},o.a.createElement("div",{className:"p-2 mb-1"},o.a.createElement("p",{className:"mb-1"},o.a.createElement("b",null,"Pod Name")),o.a.createElement(ge.a,{spellCheck:!1,value:n.label||"",onChange:function(t){return e.updateLabel(t.target.value)},className:"pod-name-input"})),o.a.createElement("p",{className:"mb-1 px-2"},o.a.createElement("b",null,"Properties")),o.a.createElement("div",{className:"property-table flex-fill mx-2"},Object.keys(n.properties).map((function(t){var a=n.properties[t];return o.a.createElement("div",{key:t,className:"property-item mb-2"},o.a.createElement("p",{className:"property-label mb-1"},t),o.a.createElement(ge.a,{spellCheck:!1,value:a||"",onChange:function(a){return e.updateExistingValue(t,a.target.value)},className:"property-value-input"}))})),a.map((function(t){if("undefined"==typeof n.properties[t.name])return o.a.createElement("div",{key:t.name,className:"property-item mb-2"},o.a.createElement("p",{className:"property-label mb-1"},t.name),o.a.createElement(ge.a,{spellCheck:!1,placeholder:t.type,value:n.newProperties[t.name]||"",onChange:function(a){return e.updateNewValue(t.name,a.target.value)},className:"property-value-input"}))}))),o.a.createElement("div",{className:"p-2"},o.a.createElement(v.a,{variant:"danger",className:"w-100",onClick:e.props.deleteSelection},"Delete Pod")))},e.renderEditLink=function(t){var a=e.props.chart.nodes,n=a[t.from.nodeId].label,r=a[t.to.nodeId].label;return o.a.createElement("div",{className:"h-100 d-flex flex-column"},o.a.createElement("div",{className:"flex-fill"},o.a.createElement("div",{className:"p-2 mb-1"},o.a.createElement("p",{className:"mb-1"},o.a.createElement("b",null,"Type")),o.a.createElement("h5",null,"Connection"),o.a.createElement("p",{className:"mb-1"},o.a.createElement("b",null,"From")),o.a.createElement("h5",null,n),o.a.createElement("p",{className:"mb-1"},o.a.createElement("b",null,"To")),o.a.createElement("h5",null,r))),o.a.createElement("div",{className:"p-2"},o.a.createElement(v.a,{variant:"danger",className:"w-100",onClick:e.props.deleteSelection},"Delete Connection")))},e.renderInstructions=function(){return o.a.createElement("div",{className:"sidebar-instructions text-muted"},o.a.createElement("h4",null,"Select a pod to edit properties"),o.a.createElement("p",null,"or"),o.a.createElement("h4",{className:"mb-4"},"Drag a new pod:"),o.a.createElement(pe,{type:"New Pod",ports:{inPort:{id:"inPort",type:"input"},outPort:{id:"outPort",type:"output"}},label:"tests",properties:{}}))},e.render=function(){var t=e.props.chart,a=t.selected,n=t.nodes,r=t.links,l=Object.keys(a).length>0;return o.a.createElement(he.a,{className:"flowchart-sidebar mb-4"},l?"link"===a.type?e.renderEditLink(r[a.id],n):e.renderEditNode(n[a.id]):e.renderInstructions())},e}return a}(o.a.Component),be=a(484),ve=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).getPropertiesString=function(){var t=e.props.node.properties||{},a="";return Object.keys(t).map((function(e){a=a.concat("pod-".concat(e,"-").concat(t[e]," "))})),a},e.render=function(){var t=e.props.node,a=t.label,n=(t.type,t.properties),r=e.getPropertiesString();return o.a.createElement("div",{className:"chart-node ".concat(r)},o.a.createElement("p",{className:"m-1"},o.a.createElement("b",null,a||o.a.createElement("span",{className:"text-warning"},"Unnamed Pod")),o.a.createElement(be.a,{variant:"primary",className:"ml-2 mt-1"},n.replicas)))},e}return a}(o.a.Component),Ee=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).render=function(){return o.a.createElement("div",{className:"node-port"},o.a.createElement("i",{className:"fa fa-chevron-down"}))},e}return a}(o.a.Component),ye=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(u.a)(this,a),(n=t.call(this,e)).componentWillMount=function(){U.on("update-flowchart",n.getData),U.on("update-ui",n.getBanner)},n.componentWillUnmount=function(){U.removeListener("update-flowchart",n.getData),U.removeListener("update-ui",n.getBanner)},n.getData=function(){var e=U.getFlowchart();n.updateChart(e)},n.getBanner=function(){var e=U.getBanner("flow");n.setState({banner:e})},n.updateNode=function(e,t){var a=n.state.chart,r=Object(se.cloneDeep)(a);console.log("newChart: ",r),r.nodes[e.id].label=e.label;var o=Object(L.a)({},e.properties,{},e.newProperties);return Object.keys(o).map((function(e){""!=o[e]&&"undefined"!=typeof o[e]||delete o[e]})),r.nodes[e.id].properties=o,n.updateChart(Object(L.a)({},a,{},r)),r.nodes[e.id]},n.cancelChanges=function(){n.stateActionCallbacks.onCanvasClick({})},n.deleteSelection=function(){n.stateActionCallbacks.onDeleteKey({})},n.updateChart=function(e){n.setState({chart:e})},n.selectNode=function(e){C.dispatch({actionType:x.a.SELECT_NODE,payload:e.nodeId})},n.copyChartAsYAML=function(){!function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}(function(e){console.log("formatAsYAML input: ",e);var t={with:e.with||{},pods:{}};return t.with.board={canvas:{}},Object.keys(e.nodes).map((function(a){var n=e.nodes[a];n.label&&(t.pods[n.label]={},Object.keys(n.properties).map((function(e){var a=I[e];t.pods[n.label][e]="bool"===a?"true"==n.properties[e]:"int"===a?parseInt(n.properties[e]):n.properties[e]})),t.with.board.canvas[n.label]={x:n.position.x,y:n.position.y})})),Object.keys(e.links).map((function(a){var n=e.links[a],r=e.nodes[n.from.nodeId].label,o=e.nodes[n.to.nodeId].label;r&&o&&(t.pods[o].needs?(Array.isArray(t.pods[o].needs)||(t.pods[o].needs=[t.pods[o].needs]),t.pods[o].needs.push(r)):t.pods[o].needs=r)})),"!Flow\n".concat(T.stringify(t))}(n.state.chart)),alert("Chart copied to clipboard as YAML")},n.validateLink=function(e){var t=e.fromNodeId,a=e.toNodeId,n=e.fromPortId,r=e.toPortId;e.chart;return"outPort"==n&&"inPort"==r&&t!=a},n.showImportModal=function(){C.dispatch({actionType:x.a.SHOW_MODAL,payload:{modal:"import"}})},n.render=function(){var e=n.state,t=e.chart,a=e.banner;return o.a.createElement(Y.i,{fluid:!0,className:"main-content-container px-0"},a&&o.a.createElement("div",{className:"mr-4"},o.a.createElement("div",{className:"mb-0 banner px-4 banner-".concat(a.theme)},a.message)),o.a.createElement("div",{className:"px-4"},o.a.createElement(Y.x,{noGutters:!0,className:"page-header py-4"},o.a.createElement(de,{title:"Flow Design",subtitle:"Local Network",className:"text-sm-left mb-3"}),o.a.createElement(Y.g,{className:"col d-flex align-items-right"},o.a.createElement("div",{className:"d-none d-md-block flex-fill"}),o.a.createElement(Y.c,{className:"d-inline-flex mb-3 mb-sm-0 mx-auto py-0"},o.a.createElement(Y.b,{theme:"white",to:"/analytics",onClick:n.showImportModal},"Import YAML"),o.a.createElement(Y.b,{theme:"white",to:"/ecommerce",onClick:n.copyChartAsYAML},"Copy YAML")))),o.a.createElement("div",{className:"flow-container d-flex flex-column flex-md-row"},o.a.createElement(Y.d,{className:"chart-section-container p-1 mr-md-4 mb-4"},o.a.createElement("div",{className:"chart-container"},o.a.createElement(ie.FlowChart,{chart:t,Components:{NodeInner:ve,Port:Ee},callbacks:n.stateActionCallbacks,config:{validateLink:n.validateLink}}))),o.a.createElement(fe,{chart:t,cancelChanges:n.cancelChanges,deleteSelection:n.deleteSelection,updateNode:n.updateNode}))))};var r=U.getFlowchart(),l=U.getBanner("flow");return n.state={chart:r,banner:l},n.stateActionCallbacks=Object.keys(ue).reduce((function(e,t,a){return e[t]=function(){var e=n.state.chart,a=ue[t],r=a.apply(void 0,arguments),o=r(e);return n.updateChart(Object(L.a)({},e,{},o)),o},e}),{}),n}return a}(o.a.Component),Ce=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).render=function(){var t=e.props.data,a=t.name,n=t.msg,r=t.levelname,l=t.process,c=t.formattedTimestamp,s=t.idx,i=String(a);i=i.length>20?i.substring(0,20):i;var u=String(r)[0];return o.a.createElement("div",{className:"log log-".concat(String(r).toLowerCase()," px-4 border-bottom py-1")},o.a.createElement(g.a,null,o.a.createElement(h.a,{lg:"2",md:"3",className:"log-prefix text-muted px-0 d-flex flex-row"},o.a.createElement("div",{className:"text-bold mr-2"},s),o.a.createElement("div",{className:"ml-auto"},c)),o.a.createElement(h.a,{lg:"3",md:"3",className:"log-prefix px-0 text-left text-md-right text-bold"},i,"@",l,"[",u,"]:"),o.a.createElement(h.a,{className:"px-0"},n)))},e}return a}(o.a.Component),we=a(242),Oe=a.n(we),Ne=a(170),Se=a.n(Ne),ke=a(171),_e=a.n(ke),xe=a(99),Le=a.n(xe),Te=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r)))._cache=new xe.CellMeasurerCache({defaultHeight:10,fixedWidth:!0}),e._resultsCache=new xe.CellMeasurerCache({defaultHeight:10,fixedWidth:!0}),e._mostRecentWidth=0,e._mostRecentHeight=0,e._resizeAllFlag=!1,e._startIndex=0,e._scrollIndex=0,e._scrollTop=0,e._scrolledToBottom=!0,e.state={logData:U.getLogs(),logs:U.getLogs().all,sources:U.getLogSources(),searchQuery:"",prevQuery:"",results:[],showHelper:!1,selectedSource:"all"},e.componentWillMount=function(){U.on("update-logs",e.getData),U.on("show-log",e.getIndexedLog)},e.componentWillUnmount=function(){U.removeListener("update-logs",e.getData),U.removeListener("show-log",e.getIndexedLog)},e.componentDidMount=function(){setTimeout((function(){e._list&&(e._resizeAll(),e.backToBottom())}),1)},e.getData=function(){var t=U.getLogs(),a=U.getLogSources(),n=t[e.state.selectedSource];e.setState({logs:n,sources:a,logData:t}),e._scrolledToBottom&&e._list&&e.scrollToBottom()},e.getIndexedLog=function(){var t=U.getIndexedLog(),a=e.state.logData.all;e.setState({selectedSource:"all",logs:a}),console.log("scrolling to index: ",t),e.scrollToLog(t)},e.setSelectedSource=function(t){var a=e.state.logData[t];e.setState({logs:a,selectedSource:t},(function(){e._resizeAll(),e.backToBottom()}))},e.search=function(){var t=e.state.searchQuery;console.log("search query: ",t),e.indexLogs();var a=e.index.search("".concat(t,"*"));e.setState({results:a},e._resizeSearchResults),console.log("search results: ",a)},e.listenForEnter=function(t){13==t.charCode&&e.search()},e.indexLogs=function(){var t=e.state.logs;console.log("indexing",t.length,"logs for search"),e.index=Oe()((function(){var e=this;this.field("filename"),this.field("funcName"),this.field("msg"),this.field("name"),this.field("module"),this.field("pathname"),t.map((function(t,a){t.id=parseInt(a),e.add(t)}))}))},e.scrollToLog=function(t){e._list.scrollToRow(t)},e.scrollToBottom=function(){e._list.scrollToRow(e.state.logs.length),e._scrolledToBottom=!0},e.scrollToBottomResults=function(){e._resultsList.scrollToRow(e.state.results.length),e._scrolledToBottom=!0},e.backToBottom=function(){e.scrollToBottom(),setTimeout(e.scrollToBottom,1)},e.updateSearchQuery=function(t){e.setState({searchQuery:t.target.value},e.search)},e.clearSearchResults=function(){e.setState({results:!1,searchQuery:""})},e.renderSearchResults=function(){var t=e.state.results;return o.a.createElement(_e.a,null,(function(a){var n=a.height,r=a.width;return e._mostRecentWidth!==r&&(e._mostRecentWidth=r,setTimeout(e._resizeSearchResults,0)),e._mostRecentHeight!==n&&(e._mostRecentHeight=n,setTimeout(e._resizeSearchResults,0)),o.a.createElement(Se.a,{width:r,height:n,ref:function(t){return e._resultsList=t},deferredMeasurementCache:e._resultsCache,rowHeight:e._resultsCache.rowHeight,rowCount:t.length,rowRenderer:e.renderSearchResultRow})}))},e.renderLogRow=function(t){var a=t.index,n=(t.isScrolling,t.key),r=t.parent,l=t.style,c=e.state.logs[a];return o.a.createElement(Le.a,{cache:e._cache,columnIndex:0,key:n,parent:r,rowIndex:a},o.a.createElement("div",{style:Object(L.a)({},l,{wordBreak:"break-word"})},o.a.createElement(Ce,{index:a,data:c})))},e.renderSearchResultRow=function(t){var a=t.index,n=(t.isScrolling,t.key),r=t.parent,l=t.style,c=e.state.results[a],s=e.state.logs[c.ref];return o.a.createElement(Le.a,{cache:e._resultsCache,columnIndex:0,key:n,parent:r,rowIndex:a},o.a.createElement("div",{style:Object(L.a)({},l,{wordBreak:"break-word"})},o.a.createElement(Ce,{data:s})))},e.render=function(){var t=e.state,a=t.results,n=t.searchQuery,r=t.logs,l=t.showHelper,c=t.sources;return o.a.createElement(he.a,{className:"mb-4"},o.a.createElement(he.a.Header,{className:"p-3"},o.a.createElement(g.a,null,o.a.createElement(h.a,{md:"4",xs:"6"},o.a.createElement(ge.a,{as:"select",onChange:function(t){return e.setSelectedSource(t.target.value)}},o.a.createElement("option",{value:"all"},"All Logs"),Object.keys(c).map((function(e){return o.a.createElement("option",{key:e,value:e},e)})))),o.a.createElement(h.a,{md:"4",className:"d-none d-md-inline-block"}),o.a.createElement(h.a,{md:"4",xs:"6"},o.a.createElement(ge.a,{placeholder:"search logs...",onKeyPress:e.listenForEnter,onChange:e.updateSearchQuery,value:n})))),o.a.createElement(he.a.Body,{className:"log-stream-container p-1 border-top",id:"log-stream-container"},n&&a?"":o.a.createElement("div",{onClick:e.backToBottom,className:"back-to-bottom ".concat(l&&"active")},o.a.createElement("i",{className:"material-icons"},"arrow_downward")," Back to Bottom"),n&&a?e.renderSearchResults():o.a.createElement(_e.a,null,(function(t){var a=t.height,n=t.width;return e._mostRecentWidth!==n&&(e._mostRecentWidth=n,setTimeout(e._resizeAll,0),setTimeout(e.backToBottom,1)),e._mostRecentHeight!==a&&(e._mostRecentHeight=a,setTimeout(e._resizeAll,0),setTimeout(e.backToBottom,1)),o.a.createElement(Se.a,{width:n,height:a,ref:function(t){return e._list=t},deferredMeasurementCache:e._cache,rowHeight:e._cache.rowHeight,rowCount:r.length,rowRenderer:e.renderLogRow,onScroll:e._onScroll,scrollToAlignment:"center"})}))))},e._onRowsRendered=function(t,a){var n=t.startIndex;e._startIndex=n},e._onScroll=function(t){var a=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;console.log("scrollTop: ",a),console.log("scrollHeight: ",n),console.log("clientHeight: ",r),e._scrollTop=a;var o=n-(a+r);e._scrolledToBottom=o<10,o>75&&!e.state.showHelper?e.setState({showHelper:!0}):o<=75&&e.state.showHelper&&e.setState({showHelper:!1})},e._resizeAll=function(){e._resizeAllFlag=!1,e._cache.clearAll(),e._list&&e._list.recomputeRowHeights()},e._resizeSearchResults=function(){e._resizeAllFlag=!1,e._resultsCache.clearAll(),e._resultsList&&e._resultsList.recomputeRowHeights()},e}return a}(o.a.Component),je=a(119),Ae=a.n(je),Ie={INFO:{border:"#009999",background:"rgba(0, 153, 153, 0.9)"},SUCCESS:{border:"#32c8cd",background:"rgba(50, 200, 205, 0.9)"},WARNING:{border:"#ffcc66",background:"rgba(255, 204, 102, 0.9)"},ERROR:{border:"#ff6666",background:"rgba(255, 102, 102, 0.9)"},CRITICAL:{border:"#ff4540",background:"rgba(255, 70, 64, 0.9)"},DEBUG:{border:"#6E7278",background:"rgba(110, 114, 120, 0.9)"}},De=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.renderChart()},n.renderChart=function(){var e=n.props.data,t={events:["click"],onClick:n.onClick,maintainAspectRatio:!0,responsive:!0,legend:{position:"bottom",labels:{padding:10,boxWidth:20}},tooltips:{enabled:!1,custom:!1},elements:{point:{radius:0,hitRadius:10}},scales:{xAxes:[{gridLines:!1,color:"red",ticks:{display:!1}}],yAxes:[{gridLines:{borderDash:[2.5,5],zeroLineColor:"#6c757d",drawBorder:!1,color:"#6c757d"},ticks:{padding:5,suggestedMin:0}}]}},a=Object(L.a)({onClick:n.onClick,type:"line",labels:n.getLabels(60),data:{datasets:Object.keys(e).map((function(t){var a=e[t];return{label:t,fill:"start",borderWidth:1.5,borderColor:Ie[t].border,backgroundColor:Ie[t].background,data:a}}))},options:t},n.props.chartConfig);n.chart=new Ae.a(n.canvasRef.current,a)},n.onClick=function(e){var t=n.chart.getElementsAtEvent(e);n.props.onClick(t)},n.getLabels=function(e){for(var t=[],a=0;a<e;++a)t.push(a);return t},n.updateChart=function(){var e=n.props.data,t={labels:n.getLabels(60),datasets:Object.keys(e).map((function(t){var a=e[t];return{label:t,fill:"start",borderWidth:1.5,borderColor:Ie[t].border,backgroundColor:Ie[t].background,data:a}}))};n.chart.data=t,n.chart.options.animation=!1,n.chart.update()},n.render=function(){n.canvasRef.current&&n.chart&&n.updateChart();var e=n.props,t=e.width,a=e.height;return o.a.createElement("div",{className:"graph-container"},o.a.createElement("canvas",{height:a||10,width:t||100,ref:n.canvasRef}))},n.canvasRef=o.a.createRef(),n}return a}(o.a.Component),Re=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={chartData:U.getSummaryCharts()},e.componentWillMount=function(){U.on("update-summary-chart",e.getData)},e.componentWillUnmount=function(){U.removeListener("update-summary-chart",e.getData)},e.showLog=function(e){var t=e[0]&&e[0]._index;C.dispatch({actionType:x.a.SHOW_LOG_AT_INDEX,payload:t})},e.getData=function(){var t=U.getSummaryCharts();e.setState({chartData:t})},e.render=function(){var t=e.state.chartData;return o.a.createElement(he.a,{className:"h-100"},o.a.createElement(he.a.Body,{className:"d-none d-md-block pb-2"},o.a.createElement(De,{data:t,height:10,width:70,onClick:e.showLog})),o.a.createElement(he.a.Body,{className:"d-md-none pb-2"},o.a.createElement(De,{data:t,height:20,width:50,onClick:e.showLog})))},e}return a}(o.a.Component),Me=[{border:"#fff",background:"rgba(0, 153, 153, 0.85)"},{border:"#fff",background:"rgba(0, 153, 153, 0.75)"},{border:"#fff",background:"rgba(0, 153, 153, 0.65)"},{border:"#fff",background:"rgba(0, 153, 153, 0.55)"},{border:"#fff",background:"rgba(0, 153, 153, 0.45)"},{border:"#fff",background:"rgba(0, 153, 153, 0.35)"},{border:"#fff",background:"rgba(0, 153, 153, 0.25)"},{border:"#fff",background:"rgba(0, 153, 153, 0.15)"},{border:"#fff",background:"rgba(0, 153, 153, 0.05)"}],Be=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.renderChart()},n.getColor=function(e){for(var t=!1;!t;)Me[e]?t=Me[e]:e-=Me.length;return t},n.renderChart=function(){var e=n.props.data,t=Object.keys(e),a=Object(L.a)({type:"pie",labels:t,data:{datasets:[{borderWidth:1,data:t.map((function(t){return e[t]})),borderColor:t.map((function(e,t){return n.getColor(t).border})),backgroundColor:t.map((function(e,t){return n.getColor(t).background}))}]},options:{legend:{display:!1,position:"bottom",labels:{padding:25,boxWidth:20}},tooltips:{custom:!1,mode:"index",position:"nearest"}}},n.props.chartConfig);n.chart=new Ae.a(n.canvasRef.current,a)},n.updateChart=function(){var e=n.props.data,t=Object.keys(e),a={labels:t,datasets:[{borderWidth:1,data:t.map((function(t){return e[t]})),borderColor:t.map((function(e,t){return n.getColor(t).border})),backgroundColor:t.map((function(e,t){return n.getColor(t).background}))}]};n.chart.data=a,n.chart.options.animation=!1,n.chart.update()},n.render=function(){n.canvasRef.current&&n.chart&&n.updateChart();var e=n.props,t=e.width,a=e.height;return o.a.createElement("div",{className:"graph-container"},o.a.createElement("canvas",{height:a||50,width:t||50,ref:n.canvasRef}))},n.canvasRef=o.a.createRef(),n}return a}(o.a.Component),Pe=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={chartData:U.getOccurencesByName()},e.componentWillMount=function(){U.on("update-summary-chart",e.getData)},e.componentWillUnmount=function(){U.removeListener("update-summary-chart",e.getData)},e.getData=function(){var t=U.getOccurencesByName();e.setState({chartData:t})},e.render=function(){var t=e.state.chartData;return o.a.createElement(he.a,{className:"h-100"},o.a.createElement(he.a.Body,null,o.a.createElement(Be,{data:t})))},e}return a}(o.a.Component),We=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={banner:U.getBanner("logs")},e.componentWillMount=function(){U.on("update-ui",e.getData)},e.componentWillUnmount=function(){U.removeListener("update-ui",e.getData)},e.getData=function(){var t=U.getBanner("logs");e.setState({banner:t})},e.render=function(){var t=e.state.banner;return o.a.createElement(p.a,{fluid:!0,className:"main-content-container px-0"},t&&o.a.createElement("div",{className:"mr-4"},o.a.createElement("div",{className:"mb-0 banner px-4 banner-".concat(t.theme)},t.message)),o.a.createElement("div",{className:"px-4"},o.a.createElement(g.a,{noGutters:!0,className:"page-header py-4"},o.a.createElement(de,{title:"Log Stream",subtitle:"Local Network",className:"text-sm-left mb-3"})),o.a.createElement(g.a,null,o.a.createElement(h.a,{md:"10",className:"mb-4"},o.a.createElement(Re,null)),o.a.createElement(h.a,{md:"2",className:"mb-4"},o.a.createElement(Pe,null))),o.a.createElement(Te,null)))},e}return a}(o.a.Component),He=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={original:U.getSettings(),updates:{}},e.componentWillMount=function(){U.on("update-settings",e.getData)},e.componentWillUnmount=function(){U.removeListener("update-settings",e.getData)},e.getData=function(){var t=U.getSettings();e.setState({original:t,updates:{}})},e.updateSetting=function(t,a){e.setState((function(e){var n=e.updates;return n[t]=a,{updates:n}})),console.log("updates: ",e.state.updates)},e.saveChanges=function(){var t=e.state,a=t.original,n=t.updates,r=Object(L.a)({},a,{},n);C.dispatch({actionType:x.a.SAVE_SETTINGS,payload:r})},e.render=function(){var t=e.state,a=t.original,n=t.updates;return o.a.createElement(Y.d,{small:!0,className:"mb-4"},o.a.createElement(Y.f,{className:"border-bottom"},o.a.createElement("h6",{className:"m-0"},"Connection Preferences")),o.a.createElement(Y.e,null,o.a.createElement(Y.n,null,o.a.createElement(Y.x,{form:!0},o.a.createElement(Y.g,{md:"6",className:"form-group"},o.a.createElement("label",null,"Host"),o.a.createElement(Y.o,{placeholder:"0.0.0.0",value:"host"in n?n.host:a.host,onChange:function(t){return e.updateSetting("host",t.target.value)}})),o.a.createElement(Y.g,{md:"6",className:"form-group"},o.a.createElement("label",null,"Port"),o.a.createElement(Y.o,{placeholder:"5000",value:"port"in n?n.port:a.port,onChange:function(t){return e.updateSetting("port",t.target.value)}}))),o.a.createElement("strong",{class:"text-muted d-block mb-3"},"Endpoints"),o.a.createElement(Y.x,{form:!0},o.a.createElement(Y.g,{md:"6",className:"form-group"},o.a.createElement("label",null,"Log"),o.a.createElement(Y.o,{placeholder:"/stream/log",value:"log"in n?n.log:a.log,onChange:function(t){return e.updateSetting("log",t.target.value)}})),o.a.createElement(Y.g,{md:"6",className:"form-group"},o.a.createElement("label",null,"Profile"),o.a.createElement(Y.o,{placeholder:"/stream/profile",value:"profile"in n?n.profile:a.profile,onChange:function(t){return e.updateSetting("profile",t.target.value)}})),o.a.createElement(Y.g,{md:"6",className:"form-group"},o.a.createElement("label",null,"YAML"),o.a.createElement(Y.o,{placeholder:"/data/yaml",value:"yaml"in n?n.yaml:a.yaml,onChange:function(t){return e.updateSetting("yaml",t.target.value)}})),o.a.createElement(Y.g,{md:"6",className:"form-group"},o.a.createElement("label",null,"Shutdown"),o.a.createElement(Y.o,{placeholder:"/action/shutdown",value:"shutdown"in n?n.shutdown:a.shutdown,onChange:function(t){return e.updateSetting("shutdown",t.target.value)}})),o.a.createElement(Y.g,{md:"6",className:"form-group"},o.a.createElement("label",null,"Ready"),o.a.createElement(Y.o,{placeholder:"/status/isready",value:"ready"in n?n.ready:a.ready,onChange:function(t){return e.updateSetting("ready",t.target.value)}})))),o.a.createElement(Y.b,{theme:"primary",onClick:e.saveChanges},"Save Settings")))},e}return a}(o.a.Component),Ge=function(){return o.a.createElement(Y.i,{fluid:!0,className:"main-content-container px-4 pb-4"},o.a.createElement("div",{className:"error"},o.a.createElement("div",{className:"error__content"},o.a.createElement("h2",null,"404"),o.a.createElement("h3",null,"This page does not exist yet!"),o.a.createElement("p",null,"Try turning your clock forward."),o.a.createElement(Y.b,{pill:!0},"\u2190 Go Back"))))},Ue=[{path:"/",exact:!0,layout:oe,component:function(){return o.a.createElement(i.a,{to:"/logs"})}},{path:"/logs",layout:ce,component:We},{path:"/flow",layout:ce,component:ye},{path:"/settings",layout:ce,component:function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).render=function(){return o.a.createElement(p.a,{fluid:!0,className:"main-content-container px-4"},o.a.createElement(g.a,{noGutters:!0,className:"page-header py-4"},o.a.createElement(de,{title:"Settings",subtitle:"Local Network",className:"text-sm-left mb-3"})),o.a.createElement(He,null))},e}return a}(o.a.Component)},{path:"/help",layout:ce,component:Ge},{path:"/home",layout:ce,component:Ge},{path:"/hub",layout:ce,component:Ge}],Fe=a(124);Fe.a.initialize(Object({NODE_ENV:"production",PUBLIC_URL:"/dashboard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_GAID||"ga-id");var Ye=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=function(e){Fe.a.set(Object(L.a)({page:e},t)),Fe.a.pageview(e)},n=Object({NODE_ENV:"production",PUBLIC_URL:"/dashboard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_BASENAME||"",l=function(t){Object(m.a)(l,t);var r=Object(d.a)(l);function l(){return Object(u.a)(this,l),r.apply(this,arguments)}return Object(S.a)(l,[{key:"componentDidMount",value:function(){var e=this.props.location.pathname+this.props.location.search;a("".concat(n).concat(e))}},{key:"componentDidUpdate",value:function(e){var t=e.location.pathname+e.location.search,r=this.props.location.pathname+this.props.location.search;t!==r&&a("".concat(n).concat(r))}},{key:"render",value:function(){return o.a.createElement(e,this.props)}}]),l}(r.Component);return l},ze=(a(472),a(473),a(474),function(){return o.a.createElement(s.a,{basename:"/"},o.a.createElement("div",null,Ue.map((function(e,t){return o.a.createElement(i.b,{key:t,path:e.path,exact:e.exact,component:Ye((function(t){return o.a.createElement(e.layout,t,o.a.createElement(e.component,t))}))})}))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(ze,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},51:function(e,t){e.exports={TOGGLE_SIDEBAR:"TOGGLE_SIDEBAR",SET_CURRENT_TAB:"SET_CURRENT_TAB",SELECT_NODE:"SELECT_NODE",IMPORT_CUSTOM_YAML:"IMPORT_CUSTOM_YAML",SHOW_MODAL:"SHOW_MODAL",CLOSE_MODAL:"CLOSE_MODAL",SHOW_LOG_AT_INDEX:"SHOW_LOG_AT_INDEX",SAVE_SETTINGS:"SAVE_SETTINGS",RECONNECT:"RECONNECT"}}},[[247,1,2]]]);
//# sourceMappingURL=main.7ad84148.chunk.js.map
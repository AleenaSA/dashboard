(this["webpackJsonpdashboard-v1"]=this["webpackJsonpdashboard-v1"]||[]).push([[0],{131:function(e){e.exports=JSON.parse('[{"name":"uses","type":"str"},{"name":"replicas","type":"int"},{"name":"read_only","type":"bool"},{"name":"separated_workspace","type":"bool"},{"name":"host","type":"str"},{"name":"port_grpc","type":"int"},{"name":"identity","type":"str"},{"name":"image","type":"str"},{"name":"entrypoint","type":"str"},{"name":"pull_latest","type":"bool"},{"name":"volumes","type":"str"},{"name":"port_in","type":"int"},{"name":"port_out","type":"int"},{"name":"host_in","type":"str"},{"name":"host_out","type":"str"},{"name":"socket_in","type":"SocketType"},{"name":"socket_out","type":"SocketType"},{"name":"port_ctrl","type":"int"},{"name":"ctrl_with_ipc","type":"bool"},{"name":"timeout","type":"int"},{"name":"timeout_ctrl","type":"int"},{"name":"timeout_ready","type":"int"},{"name":"dump_interval","type":"int"},{"name":"exit_no_dump","type":"bool"},{"name":"replica_id","type":"int"},{"name":"check_version","type":"bool"},{"name":"array_in_pb","type":"bool"},{"name":"num_part","type":"int"},{"name":"memory_hwm","type":"int"},{"name":"runtime","type":"str"},{"name":"max_idle_time","type":"int"},{"name":"log_sse","type":"bool"},{"name":"log_remote","type":"bool"},{"name":"log_profile","type":"bool"},{"name":"max_message_size","type":"int"},{"name":"proxy","type":"bool"},{"name":"replica_type","type":"ReplicaType"},{"name":"shutdown_idle","type":"bool"}]')},186:function(e,t){e.exports={pokedex:{name:"Pokedex Query",type:"example",yaml:"!Flow\n    with:\n      read_only: true\n      rest_api: true\n      port_expose: $JINA_PORT\n      board:\n        canvas:\n          gateway:\n            x: 250\n            y: 150\n          chunk_seg:\n            x: 250\n            y: 268\n          tf_encode:\n            x: 250\n            y: 420\n          chunk_idx:\n            x: 250\n            y: 600\n          ranker:\n            x: 250\n            y: 836\n          doc_idx:\n            x: 249\n            y: 985\n    pods:\n      gateway: {}\n      chunk_seg:\n        uses: pods/craft.yml\n        parallel: $PARALLEL\n        needs: gateway\n      tf_encode:\n        uses: pods/encode.yml\n        parallel: $PARALLEL\n        timeout_ready: 600000\n        needs: chunk_seg\n      chunk_idx:\n        uses: pods/chunk.yml\n        shards: $SHARDS\n        separated_workspace: true\n        polling: all\n        uses_reducing: _merge_all\n        timeout_ready: 100000\n        needs: tf_encode\n      ranker:\n        uses: BiMatchRanker\n        needs: chunk_idx\n      doc_idx:\n        uses: pods/doc.yml\n        needs: ranker\n    \n    "},flower:{name:"Flower Search Query",type:"example",yaml:"!Flow\n    with:\n      read_only: true\n      port_expose: $JINA_PORT\n      board:\n        canvas:\n          gateway:\n            x: 250\n            y: 150\n          loader:\n            x: 250\n            y: 257\n          flipper:\n            x: 252\n            y: 407\n          normalizer:\n            x: 239\n            y: 563\n          encoder:\n            x: 252\n            y: 712\n          chunk_indexer:\n            x: 250\n            y: 872\n          ranker:\n            x: 252\n            y: 1066\n          doc_indexer:\n            x: 253\n            y: 1199\n    pods:\n      gateway: {}\n      loader:\n        uses: yaml/craft-load.yml\n        read_only: true\n        needs: gateway\n      flipper:\n        uses: yaml/craft-flip.yml\n        read_only: true\n        needs: loader\n      normalizer:\n        uses: yaml/craft-normalize.yml\n        read_only: true\n        needs: flipper\n      encoder:\n        uses: $ENCODER\n        timeout_ready: 600000\n        read_only: true\n        needs: normalizer\n      chunk_indexer:\n        uses: yaml/index-chunk.yml\n        separated_workspace: true\n        polling: all\n        uses_reducing: _merge_all\n        needs: encoder\n      ranker:\n        uses: MinRanker\n        needs: chunk_indexer\n      doc_indexer:\n        uses: yaml/index-doc.yml\n        needs: ranker  \n    "},southpark:{name:"Southpark Query",type:"example",yaml:"!Flow\n    with:\n      read_only: true\n      port_expose: $JINA_PORT\n      board:\n        canvas:\n          gateway:\n            x: 254\n            y: 147\n          splittor:\n            x: 254\n            y: 270\n          encoder:\n            x: 254\n            y: 448\n          chunk_indexer:\n            x: 251\n            y: 645\n          ranker:\n            x: 255\n            y: 862\n          doc_indexer:\n            x: 256\n            y: 1002\n    pods:\n      gateway: {}\n      splittor:\n        uses: pods/craft-split.yml\n        parallel: $PARALLEL\n        read_only: true\n        needs: gateway\n      encoder:\n        uses: pods/encode.yml\n        parallel: $PARALLEL\n        timeout_ready: 60000\n        read_only: true\n        needs: splittor\n      chunk_indexer:\n        uses: pods/index-chunk.yml\n        shards: $SHARDS\n        separated_workspace: true\n        polling: all\n        reducing_uses: _merge_all\n        needs: encoder\n      ranker:\n        uses: MinRanker\n        needs: chunk_indexer\n      doc_indexer:\n        uses: pods/index-doc.yml\n        needs: ranker\n    "}}},192:function(e){e.exports=JSON.parse('[{"name":"reader","yaml_path":"pods/extract.yml"},{"name":"loader","yaml_path":"yaml/craft-load.yml","replicas":3,"read_only":"true"},{"name":"splittor","yaml_path":"pods/craft-split.yml","replicas":3,"read_only":"true"},{"name":"encoder","yaml_path":"pods/encode.yml","replicas":3,"timeout_ready":1200000,"read_only":"true"},{"name":"chunk_indexer","yaml_path":"pods/index-chunk.yml","replicas":3,"separated_workspace":"true"},{"name":"doc_indexer","yaml_path":"pods/index-doc.yml"},{"name":"join_all","yaml_path":"_merge","read_only":"true"},{"name":"ranker","yaml_path":"MinRanker"},{"name":"flipper","yaml_path":"yaml/craft-flip.yml","replicas":3,"read_only":"true"},{"name":"normalizer","yaml_path":"yaml/craft-normalize.yml","replicas":3,"read_only":"true"},{"name":"crafter","yaml_path":"pods/craft.yml","read_only":"true"},{"name":"chunk_seg","yaml_path":"pods/craft.yml","replicas":3}]')},210:function(e,t,a){e.exports=a(567)},25:function(e,t){e.exports={TOGGLE_SIDEBAR:"TOGGLE_SIDEBAR",SET_CURRENT_TAB:"SET_CURRENT_TAB",SELECT_NODE:"SELECT_NODE",IMPORT_CUSTOM_YAML:"IMPORT_CUSTOM_YAML",SHOW_MODAL:"SHOW_MODAL",CLOSE_MODAL:"CLOSE_MODAL",SHOW_LOG_AT_INDEX:"SHOW_LOG_AT_INDEX",SAVE_SETTINGS:"SAVE_SETTINGS",RECONNECT:"RECONNECT",POST_REVIEW:"POST_REVIEW",POST_RATING:"POST_RATING",LOG_OUT:"LOG_OUT",SEARCH_HUB:"SEARCH_HUB",SHOW_BANNER:"SHOW_BANNER",LOAD_FLOW:"LOAD_FLOW",SHOW_POD_IN_FLOW:"SHOW_POD_IN_FLOW",CREATE_NEW_FLOW:"CREATE_NEW_FLOW",UPDATE_FLOW:"UPDATE_FLOW",DUPLICATE_FLOW:"DUPLICATE_FLOW",DELETE_FLOW:"DELETE_FLOW"}},297:function(e,t){e.exports={nodeOffset:{x:250,y:150}}},565:function(e,t,a){},566:function(e,t,a){},567:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),c=a.n(o),l=a(42),s=a(24),i=a(2),m=a(15),u=a(17),d=a(16);function p(){return r.a.createElement("div",{className:"main-navbar__search w-100 d-none d-md-flex d-lg-flex"})}function g(e){var t=e.toggleSidebar;return r.a.createElement("nav",{className:"nav cursor-pointer"},r.a.createElement("span",{onClick:t,className:"nav-link nav-link-icon toggle-sidebar d-sm-inline d-md-inline d-lg-none text-center"},r.a.createElement("i",{className:"material-icons"},"\ue5d2")))}function f(e){var t=e.connected,a=e.reconnect;return r.a.createElement(i.u,{className:"border-right dropdown notifications",onClick:a},r.a.createElement(i.v,{className:"nav-link-icon text-center"},r.a.createElement("div",{className:"nav-link-icon__wrapper"},r.a.createElement("i",{className:"material-icons"},"language"),t?r.a.createElement(i.a,{pill:!0,theme:"success",className:"connection-indicator p-1"},r.a.createElement("i",{className:"material-icons"},"done")):r.a.createElement(i.a,{pill:!0,theme:"danger",className:"connection-indicator p-1"},r.a.createElement("i",{className:"material-icons"},"close")))))}function h(e){var t=e.user,a=e.logOut,n=e.userActionsVisible,o=e.toggleUserActions;return r.a.createElement(i.u,{tag:i.j,caret:!0,toggle:o},t?r.a.createElement(i.m,{caret:!0,tag:i.v,className:"text-nowrap px-3"},r.a.createElement("img",{className:"user-avatar rounded-circle mr-2",src:t._json.avatar_url,alt:"User Avatar"})," ",r.a.createElement("span",{className:"d-none d-md-inline-block"},t.username)):r.a.createElement(l.b,{to:"/login",className:"nav-link px-3"},r.a.createElement(i.b,{className:"text-nowrap mb-0 mt-1"},"Log in")),r.a.createElement(i.h,{tag:i.l,right:!0,small:!0,open:n},r.a.createElement(i.k,{tag:l.b,to:"/",className:"text-danger",onClick:a},r.a.createElement("i",{className:"material-icons text-danger"},"\ue879")," Logout")))}var b=new(a(184).Dispatcher),v=a(14),E=a.n(v),y=a(22),w=a(29),N=a(31),k=a(12),O=a(18),x=a(185),C=a(52),_=a.n(C),j=a(107),S=a(25),L=a.n(S),A=a(80),D=a(292),T=a(297),I=a(131);function F(e){return new Blob([e],{type:"text,plain;charset=utf-8"})}var R=function(e){return F(function(e){var t=e.reduce((function(t,a,n){return t+=JSON.stringify(a)+"".concat(n<e.length-1?",":"","\n")}),"\n");return"[".concat(t,"]")}(e))},M={};function P(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}function W(e){try{return{data:D.parse(e)}}catch(t){return alert("Error Parsing YAML:\n"+t),{error:t}}}function B(e,t){var a={offset:{x:0,y:0},nodes:{},links:{},selected:{},hovered:{},scale:1},n={},r={},o=!1;if(!e.gateway){var c;c=Object(k.a)({gateway:null},e),e=c}Object.keys(e).forEach((function(a){var c=e[a]||{},l={id:a,label:a,ports:{},needs:{},send_to:{},position:{},properties:Object(k.a)({},c)};if(l.properties.needs&&delete l.properties.needs,l.ports.inPort={id:"inPort",type:"input"},l.ports.outPort={id:"outPort",type:"output"},o&&!c.needs&&"gateway"!==a&&(c.needs=o),c.needs)for(var s=Array.isArray(c.needs)?c.needs:[c.needs],i=0;i<s.length;++i){var m=s[i];l.needs[m]=!0;var u="".concat(m,"-to-").concat(a),d={color:"red",id:u,from:{nodeId:m,portId:"outPort"},to:{nodeId:a,portId:"inPort"}};r[u]=d}if(t&&t[a]){var p=t[a],g=p.x,f=p.y;l.position={x:parseInt(g),y:parseInt(f)}}n[a]=l,o=a}));var l={},s=T.nodeOffset.x,i=T.nodeOffset.y;return Object.keys(n).forEach((function(e){var t=function e(t,a,n){for(var r=Object.keys(t[a].needs),o=0,c=0;c<r.length;++c){var l=r[c],s=void 0;(s=t[l].depth?t[l].depth+1:e(t,l,1))>o&&(o=s)}return n+o}(n,e,0);n[e].depth=t,l[t]>=0?l[t]++:l[t]=0,n[e].position.x||(n[e].position={y:t*i+i,x:l[t]*s+s})})),a.nodes=n,a.links=r,a}I.forEach((function(e){return M[e.name]=e.type}));function H(e){console.log("formatAsYAML input: ",e);var t=e.with,a=e.nodes,n=e.links,r=Object.values(n).reduce((function(e,t){var n=function(e,t){var a,n=e.from,r=e.to;return a={},Object(A.a)(a,n.portId,t[n.nodeId].label||t[n.nodeId].properties.name),Object(A.a)(a,r.portId,t[r.nodeId].label||t[r.nodeId].properties.name),a}(t,a),r=n.outPort,o=n.inPort;return e[o]||(e[o]=[]),e[o].push(r),e}),{}),o=Object.values(a).reduce((function(e,t){var a=t.label;if(!a)return e;var n,o=Object.entries(t.properties).reduce((function(e,t){var a=Object(O.a)(t,2),n=a[0],r=a[1];return e[n]=function(e,t){return"bool"===M[e]?"true"===t:t}(n,r),e}),{});return r[a]&&(o.needs=(n=r[a],Array.isArray(n)&&1===n.length?n[0]:n)),e[a]=Object(k.a)({},o),e}),{}),c=Object.values(a).reduce((function(e,t){var a=t.position,n=a.x,r=a.y;return e[t.label]={x:n,y:r},e}),{}),l={with:Object(k.a)(Object(k.a)({},t),{},{board:{canvas:c}}),pods:o};return"!Flow\n".concat(D.stringify(l))}function U(e){return e<1024?"".concat(e," Bytes"):e<Math.pow(1024,2)?"".concat(parseFloat(e).toFixed(1)," KB"):e<Math.pow(1024,3)?"".concat(parseFloat(e/Math.pow(1024,2)).toFixed(1)," MB"):"".concat(parseFloat(e/Math.pow(1024,3)).toFixed(1)," GB")}var G=a(143),V=a.n(G),Y=a(68);function J(e,t,a){$.log("window.onerror - ERROR",e,t,"line: ".concat(a))}var q,Q,z,$={log:function(){var e;if(window.logsEnabled){var t=Array.prototype.slice.call(arguments);(e=console).log.apply(e,Object(w.a)(t)),window.logs.push(t)}},isEnabled:function(){return window.logsEnabled},enable:function(){var e={};for(var t in window.navigator)e[t]=window.navigator[t];window.logs=[],window.logs.push(e),window.addEventListener("error",J),window.logsEnabled=!0},disable:function(){window.removeEventListener("error",J),window.logsEnabled=!1},setFormat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json";window.logsFormat=e},exportLogs:function(){for(var e=window.logsFormat||"json",t=window.logs,a="[\n",n=0;n<t.length;++n){var r=t[n];a+=JSON.stringify(r)+"".concat(n<t.length-1?",":"","\n")}a+="]";var o="jina-dashboard-debug-output-".concat(new Date,".").concat(e),c=new Blob([a],{type:"text,plain;charset=utf-8"});Object(Y.saveAs)(c,o)}},K=$,X=a(60),Z=V.a.create({baseURL:X.hubURL,withCredentials:!0,timeout:X.timeout,headers:{"Content-Type":"application/json",Accept:"application/json"}}),ee={connect:function(e,t,a,n){K.log("api - connect - settings",e);var r="".concat(e.host,":").concat(e.port).concat(e.log.startsWith("/")?e.log:"/"+e.log);K.log("api - connect - logString",r),q&&q.close(),(q=new EventSource(r)).onopen=function(){K.log("api - logStream.onopen called"),t("connected","Logserver connection established at ".concat(e.host,":").concat(e.port))},q.onmessage=function(e){a({type:"log",data:JSON.parse(e.data)})},q.onerror=function(a){K.log("api - logStream.onerror - ERROR",a),t("failed","Could not connect to logserver at ".concat(e.host,":").concat(e.port)),q.close()};var o="".concat(e.host,":").concat(e.port).concat(e.profile.startsWith("/")?e.profile:"/"+e.profile);K.log("api - connect - taskString",o),Q&&Q.close(),(Q=new EventSource(o)).onopen=function(){K.log("api - taskStream.onopen called"),n({type:"connect",data:"Task connection established at ".concat(o)})},Q.onmessage=function(e){n({type:"event",data:JSON.parse(e.data)})},Q.onerror=function(e){K.log("api - taskStream.onerror - ERROR",e),n({type:"error",data:"Could not get profile data from ".concat(o)}),Q.close()}},getProfile:function(){var e=Object(y.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.get("profile");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getYAML:function(){var e=Object(y.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(t.host,":").concat(t.port).concat(t.yaml.startsWith("/")?t.yaml:"/"+t.yaml),K.log("api - getYAML - connectionString",a),e.next=4,V.a.get(a,{timeout:X.timeout});case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getImages:function(){var e=Object(y.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.get("images");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getImage:function(){var e=Object(y.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.get("/images/".concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),postRating:function(){var e=Object(y.a)(E.a.mark((function e(t,a){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.post("/images/".concat(t,"/ratings"),{stars:a});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),postReview:function(){var e=Object(y.a)(E.a.mark((function e(t,a){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.post("/images/".concat(t,"/reviews"),{content:a});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),searchHub:function(){var e=Object(y.a)(E.a.mark((function e(t,a,n){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.get("/images?category=".concat(t,"&q=").concat(a,"&sort=").concat(n));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),logOut:function(){var e=Object(y.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.post("/auth/logout");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},te=a(131),ae=a(186),ne=a.n(ae),re=a(579);var oe=["INFO","SUCCESS","WARNING","ERROR","CRITICAL","DEBUG"];function ce(){var e={};return Object.entries(ne.a).forEach((function(t){var a,n=Object(O.a)(t,2),r=n[0],o=n[1],c=W(o.yaml);try{a=c.data.with.board.canvas}catch(s){a={}}var l=B(c.data.pods,a);e[r]=Object(k.a)(Object(k.a)({},o),{},{flow:l})})),e}function le(){var e=JSON.parse(localStorage.getItem("userFlows"));return _.a.isEmpty(e)?{_userFlow:{name:"Custom Flow 1",type:"user-generated",flow:{selected:{},hovered:{},scale:1,nodes:{gateway:{id:"gateway",label:"gateway",ports:{outPort:{id:"outPort",type:"output"}},properties:{},position:{x:629,y:72}}},links:{},offset:{x:0,y:0}}}}:e}function se(){var e={lastLog:0,levels:{}};return oe.forEach((function(t){e.levels[t]=0})),e}"localhost"===window.location.hostname&&K.enable();var ie=new(function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).registerActions=function(t){var a,n=t.actionType,r=t.payload;switch(n){case L.a.TOGGLE_SIDEBAR:e.toggleSidebar();break;case L.a.SHOW_MODAL:e.showModal(r);break;case L.a.SHOW_BANNER:(a=e).showBanner.apply(a,Object(w.a)(r));break;case L.a.IMPORT_CUSTOM_YAML:e.importCustomYAML(r);break;case L.a.CLOSE_MODAL:e.closeModal();break;case L.a.SHOW_LOG_AT_INDEX:e.showLogAtIndex(r);break;case L.a.SAVE_SETTINGS:e.saveSettings(r);break;case L.a.RECONNECT:e.reconnect(r);break;case L.a.POST_RATING:e.postRating(r);break;case L.a.POST_REVIEW:e.postReview(r);break;case L.a.SEARCH_HUB:e.searchHub(r);break;case L.a.LOG_OUT:e.logOut();break;case L.a.LOAD_FLOW:e.loadFlow(r);break;case L.a.SHOW_POD_IN_FLOW:e.showPodByLabel(r);break;case L.a.CREATE_NEW_FLOW:e.createNewFlow();break;case L.a.DUPLICATE_FLOW:e.createNewFlow(r);break;case L.a.UPDATE_FLOW:e.updateFlow(r);break;case L.a.DELETE_FLOW:e.deleteFlow(r)}},e.init=Object(y.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.clearIntervals(),z={settings:{host:localStorage.getItem("preferences-host")||"http://localhost",port:localStorage.getItem("preferences-port")||5e3,log:localStorage.getItem("preferences-log")||"/stream/log",profile:localStorage.getItem("preferences-profile")||"/stream/profile",yaml:localStorage.getItem("preferences-yaml")||"/data/yaml",shutdown:localStorage.getItem("preferences-shutdown")||"/action/shutdown",ready:localStorage.getItem("preferences-ready")||"/status/ready"},images:{},hub:[],banner:!1,connected:!1,loading:!0,modal:!1,menuVisible:!1,navItems:[{title:"Navigation",items:[{title:"Home",to:"/home",htmlBefore:'<i class="material-icons">home</i>',htmlAfter:"",matches:["home"]},{title:"Log Stream",to:"/logs",htmlBefore:'<i class="material-icons">insert_comment</i>',htmlAfter:"",matches:["logs"]},{title:"Task",to:"/task",htmlBefore:'<i class="material-icons">assessment</i>',htmlAfter:"",matches:["task"]},{title:"Flow Design",to:"/flow",htmlBefore:'<i class="material-icons">device_hub</i>',htmlAfter:"",matches:["flow"]},{title:"Hub",to:"/hub",htmlBefore:'<i class="material-icons">store</i>',htmlAfter:"",matches:["hub","package"]},{title:"Settings",to:"/settings",htmlBefore:'<i class="material-icons">settings</i>',htmlAfter:"",matches:["settings"]},{title:"Help",to:"/help",htmlBefore:'<i class="material-icons">help</i>',htmlAfter:"",matches:["help"]}]}],flows:Object(k.a)(Object(k.a)({},le()),ce()),selectedFlow:"_userFlow",logs:[],logSources:{},logLevels:{},logLevelOccurences:{},logIndex:!1,summaryCharts:{},processes:{},taskData:{qps:{current:0,history:new Array(30).fill(0)},elapsed:{task_name:"No Current Task",seconds:"0s"},progress:{currentRequest:0,bar_len:0,num_bars:0},speed:{current:0,unit:"units",history:new Array(30).fill(0)},lastUpdateChart:new Date,messages:[],bytes:[]},selectedNode:null,modalParams:{},currentTab:"logStream"},console.log("store:",z),t.next=5,e.initFlowChart();case 5:e.initLogStream(),e.initCharts(),e.initHub(),e.initUser(),e.emit("update-ui"),e.emit("update-settings");case 11:case"end":return t.stop()}}),t)}))),e.clearIntervals=function(){e.updateChartInterval&&clearInterval(e.updateChartInterval),e.updateTaskInterval&&clearInterval(e.updateTaskInterval)},e.initFlowChart=Object(y.a)(E.a.mark((function t(){var a,n,r,o,c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ee.getYAML(z.settings);case 3:n=t.sent,a=W(n),t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),K.log("initFlowChart - parseYAML[API] ERROR",t.t0),t.abrupt("return");case 11:try{r=a.data.with.board.canvas}catch(l){r={}}K.log("initFlowChart - flow",a),K.log("initFlowChart - canvas",r),(o=B(a.data.pods,r)).with=a.data.with,K.log("initFlowChart - parsed",o),(c={}).connectedFlow={flow:o,name:"Network Flow",type:"remote"},z.flows=Object(k.a)(Object(k.a)({},c),z.flows),z.selectedFlow="connectedFlow",e.emit("update-ui"),e.emit("update-flowchart");case 23:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.initLogStream=function(){ee.connect(z.settings,e.handleLogConnectionStatus,e.handleNewLog,e.handleNewTaskEvent),e.updateTaskInterval=setInterval((function(){return e.emit("update-task")}),500)},e.handleLogConnectionStatus=function(t,a){return K.log("handleLogConnectionStatus - status",t),K.log("handleLogConnectionStatus - message",a),z.loading=!1,"connected"===t?(z.connected=!0,e.showBanner(a,"success")):(z.connected=!1,e.showBanner(a,"error"))},e.handleNewLog=function(t){var a=function(e){var t=e.created,a=Object(re.a)(t),n=Object(j.a)();return Object(k.a)(Object(k.a)({},e),{},{createdDate:a,id:n})}(t.data);a.unixTime=parseInt(a.created),a.timestamp=new Date(1e3*a.unixTime),a.formattedTimestamp=a.timestamp.toLocaleString(),a.idx=z.logs.length;var n=a.process,r=a.name,o=a.levelname,c=a.unixTime;z.logs.push(a),z.processes[n]=a.name,z.logSources[r]?z.logSources[r]++:z.logSources[r]=1,z.logLevels[o]?z.logLevels[o]++:z.logLevels[o]=1,z.logLevelOccurences[c]||(z.logLevelOccurences[c]=se()),z.logLevelOccurences[c].levels[o]++,z.logLevelOccurences[c].lastLog=a.idx,e.emit("update-logs")},e.handleNewTaskEvent=function(e){var t,a=e.data,n=a.task_name,r=a.process,o=a.bar_len,c=a.num_bars,l=a.elapsed,s=a.speed,i=a.speed_unit,m=a.bytes_recv,u=a.bytes_sent,d=a.msg_recv,p=a.msg_sent,g=a.num_reqs,f=a.qps;if(o&&c&&(z.taskData.progress.currentRequest=g,z.taskData.progress.bar_len=o,z.taskData.progress.num_bars=c),d&&p){var h=z.taskData.messages.map((function(e){return e.process})).indexOf(r),b={process:r,sent:p,received:d,node:z.processes[r]},v={process:r,sent:u,received:m,node:z.processes[r]};h<0?(z.taskData.messages.push(b),z.taskData.bytes.push(v)):(z.taskData.messages[h]=b,z.taskData.bytes[h]=v),z.taskData.messages=z.taskData.messages.sort((function(e,t){return t.sent+t.received-(e.sent+e.received)})).slice(0,20),z.taskData.bytes=z.taskData.bytes.sort((function(e,t){return t.sent+t.received-(e.sent+e.received)})).slice(0,20),z.taskData.lastUpdateChart=new Date}f&&(z.taskData.qps.current=parseFloat(f).toFixed(1),z.taskData.qps.history.push(parseFloat(f).toFixed(3)),z.taskData.qps.history.shift()),s&&i&&(z.taskData.speed.unit=i,z.taskData.speed.current=parseFloat(s).toFixed(1),z.taskData.speed.history.push(parseFloat(s).toFixed(3)),z.taskData.speed.history.shift()),l&&(z.taskData.elapsed.seconds=(t=parseInt(l))<60?"".concat(t,"s"):t<3600?"".concat(parseInt(t/60),"m ").concat(parseInt(t%60),"s"):"".concat(parseInt(t/3600),"h ").concat(parseInt(t%3600/60),"m ").concat(parseInt(t%60),"s"),z.taskData.elapsed.task_name="Task: ".concat(n))},e.initCharts=Object(y.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.updateChartInterval=setInterval(e.updateSummaryCharts,1e3);case 1:case"end":return t.stop()}}),t)}))),e.initHub=Object(y.a)(E.a.mark((function t(){var a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ee.getImages();case 3:a=t.sent,z.hub=a,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),z.hub=!1;case 10:e.emit("update-hub");case 11:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.initUser=Object(y.a)(E.a.mark((function t(){var a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee.getProfile();case 2:a=t.sent,z.user=a,e.emit("update-user");case 5:case"end":return t.stop()}}),t)}))),e.updateSummaryCharts=function(){e.emit("update-summary-chart")},e.showLogAtIndex=function(t){t&&z.logs[t]&&(z.logIndex=t,e.emit("show-log"))},e.showPodByLabel=function(t){for(var a={},n=0,r=0,o=0,c=Object.entries(z.flowchart.nodes);o<c.length;o++){var l=Object(O.a)(c[o],2),s=l[0],i=l[1];i.label===t&&(a.id=s,a.type="node",n=-1*i.position.x+40,r=-1*i.position.y+100)}z.flowchart.selected=a,z.flowchart.offset={x:n,y:r},e.emit("update-flowchart"),window.location.hash="#/flow"},e.importCustomYAML=function(t){K.log("importCustomYAML - customYAML",t),e.createNewFlow(t),e.closeModal(),e.emit("update-flowchart")},e.loadFlow=function(t){z.selectedFlow=t,e.emit("update-flowchart")},e.updateFlow=function(t){z.flows[z.selectedFlow].flow=t,e.saveFlowsToStorage(),e.emit("update-flowchart")},e.createNewFlow=function(t){var a,n=Object.values(z.flows).filter((function(e){return e.name.startsWith("Custom Flow")})).map((function(e){return parseInt(e.name.substring("Custom Flow".length))||0})).sort((function(e,t){return e-t})),r=n[n.length-1]||0,o=Object(j.a)();if(t){var c,l=W(t);try{c=l.data.with.board.canvas}catch(s){c={}}a=B(l.data.pods,c)}else a={selected:{},hovered:{},scale:1,nodes:{gateway:{id:"gateway",label:"gateway",ports:{outPort:{id:"outPort",type:"output"}},properties:{},position:{x:629,y:72}}},links:{},offset:{x:0,y:0}};z.flows[o]={name:"".concat("Custom Flow"," ").concat(r+1),type:"user-generated",flow:a},z.selectedFlow=o,e.saveFlowsToStorage(),e.emit("update-flowchart")},e.deleteFlow=function(t){z.flows=_.a.omit(z.flows,t);var a=Object.entries(z.flows).filter((function(e){var t=Object(O.a)(e,2);t[0];return"example"!==t[1].type}));z.selectedFlow===t&&a.length?z.selectedFlow=a[0][0]:a.length||(z.flows=Object(k.a)({_userFlow:{name:"Custom Flow 1",type:"user-generated",flow:{selected:{},hovered:{},scale:1,nodes:{gateway:{id:"gateway",label:"gateway",ports:{outPort:{id:"outPort",type:"output"}},properties:{},position:{x:629,y:72}}},links:{},offset:{x:0,y:0}}}},z.flows),z.selectedFlow="_userFlow"),e.saveFlowsToStorage(),e.emit("update-flowchart")},e.saveFlowsToStorage=function(){var e={},t=z.flows;Object.entries(t).forEach((function(t){var a=Object(O.a)(t,2),n=a[0],r=a[1];"user-generated"===r.type&&(e[n]=r)})),localStorage.setItem("userFlows",JSON.stringify(e))},e.saveSettings=function(t){K.log("saveSettings - settings",t),Object.keys(t).forEach((function(e){localStorage.setItem("preferences-".concat(e),t[e])})),setTimeout(e.init,100)},e.postRating=function(){var t=Object(y.a)(E.a.mark((function t(a){var n,r,o,c,l;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.imageId,r=a.stars,z.user){t.next=3;break}return t.abrupt("return",window.location.hash="#/login");case 3:return t.prev=3,t.next=6,ee.postRating(n,r);case 6:o=t.sent,t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(3),c=String(t.t0).includes("409")?"Already Rated":t.t0,t.abrupt("return",e.showError(c));case 13:o.error?e.showError(o.error):o.data&&(l=o.data,z.images[l.id]=l,e.showBanner("Rating successfully posted","success")),e.emit("update-hub");case 15:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.postReview=function(){var t=Object(y.a)(E.a.mark((function t(a){var n,r,o,c,l;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.imageId,r=a.content,z.user){t.next=4;break}return e.closeModal(),t.abrupt("return",window.location.hash="#/login");case 4:return e.closeModal(),t.prev=5,t.next=8,ee.postReview(n,r);case 8:o=t.sent,t.next=15;break;case 11:return t.prev=11,t.t0=t.catch(5),c=String(t.t0).includes("409")?"Already Reviewed":t.t0,t.abrupt("return",e.showError(c));case 15:o.error?e.showError(o.error):o.data&&(l=o.data,z.images[l.id]=l,e.showBanner("Review successfully posted","success")),e.emit("update-hub");case 17:case"end":return t.stop()}}),t,null,[[5,11]])})));return function(e){return t.apply(this,arguments)}}(),e.logOut=Object(y.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.logOut();case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)}))),e.searchHub=function(){var t=Object(y.a)(E.a.mark((function t(a){var n,r,o,c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.category,r=a.q,o=a.sort,t.next=3,ee.searchHub(n,r,o);case 3:c=t.sent,z.hub=c,e.emit("update-hub");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showBanner=function(t,a){e.bannerTimeout&&clearTimeout(e.bannerTimeout),z.banner={message:String(t),theme:a},e.bannerTimeout=setTimeout(e.hideBanner,5e3),e.emit("update-ui")},e.hideBanner=function(){z.banner=!1,e.emit("update-ui")},e.showError=function(t){e.showBanner(t,"error")},e.showModal=function(t){var a=t.modal,n=t.modalParams;z.modal=a,z.modalParams=n||{},e.emit("update-ui")},e.closeModal=function(){z.modal=!1,z.modalParams={},e.emit("update-ui")},e.getCurrentTab=function(){return z.currentTab},e.getUser=function(){return z.user},e.getHubImages=function(){return z.hub},e.getHubImage=function(){var e=Object(y.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z.images[t]){e.next=4;break}return e.next=3,ee.getImage(t);case 3:z.images[t]=e.sent;case 4:return e.abrupt("return",z.images[t]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.getSettings=function(){return z.settings},e.getBanner=function(){return z.banner},e.getModal=function(){return z.modal},e.getModalParams=function(){return z.modalParams},e.getLogs=function(){return z.logs},e.getLogSources=function(){return z.logSources},e.getLogLevels=function(){return z.logLevels},e.getSummaryCharts=function(){return z.summaryCharts},e.getLogLevelCharts=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60,t=se(),a=[],n=parseInt(new Date/1e3),r=n-e;r<n;r++)a.push(z.logLevelOccurences[r]?z.logLevelOccurences[r]:t);return a},e.getLogLevelOccurences=function(){return z.logLevels},e.getTaskData=function(){return z.taskData},e.getActivePanel=function(){var e=window.location.hash.substring(2,window.location.hash.length);return e.startsWith("flow")?"flow":e.startsWith("logs")?"logs":e.startsWith("hub")||e.startsWith("package")?"hub":e.startsWith("task")?"task":"neither"},e.getConnectionStatus=function(){return z.connected},e.isLoading=function(){return z.loading},e.getFlowchart=function(){return z.flows[z.selectedFlow]},e.getFlows=function(){return z.flows},e.getSelectedFlowId=function(){return z.selectedFlow},e.getAvailableProperties=function(){return te},e.getIndexedLog=function(){return z.logIndex},e.getStoreCopy=function(){return _.a.cloneDeep(z)},b.register(e.registerActions),e.init(),window.peakLogs=e.getLogs,window.peakStore=function(){return console.log(z)},e}return Object(N.a)(a,[{key:"reconnect",value:function(){this.init()}},{key:"toggleSidebar",value:function(){z.menuVisible=!z.menuVisible,this.emit("update-ui")}},{key:"getMenuState",value:function(){return z.menuVisible}},{key:"getSidebarItems",value:function(){return z.navItems}}]),a}(x.EventEmitter)),me=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).componentWillUnmount=function(){ie.removeListener("update-ui",e.getData),ie.removeListener("update-user",e.getData)},e.getData=function(){var t=ie.getConnectionStatus(),a=ie.getUser();e.setState({connected:t,user:a})},e.reconnect=function(){b.dispatch({actionType:L.a.RECONNECT})},e.toggleUserActions=function(){e.setState({userActionsVisible:!e.state.userActionsVisible})},e.logOut=function(){b.dispatch({actionType:L.a.LOG_OUT})},e.toggleSidebar=function(){b.dispatch({actionType:L.a.TOGGLE_SIDEBAR})},e.render=function(){var t=e.state,a=t.connected,n=t.user,o=t.userActionsVisible;return r.a.createElement("div",{className:"main-navbar bg-white sticky-top"},r.a.createElement(i.i,{fluid:!0,className:"p-0"},r.a.createElement(i.w,{type:"light",className:"align-items-stretch flex-md-nowrap p-0"},r.a.createElement(p,null),r.a.createElement(i.t,{navbar:!0,className:"border-left flex-row"},r.a.createElement(f,{reconnect:e.reconnect,connected:a}),r.a.createElement(h,{user:n,userActionsVisible:o,toggleUserActions:e.toggleUserActions,logOut:e.logOut})),r.a.createElement(g,{toggleSidebar:e.toggleSidebar}))))},e.state={userActionsVisible:!1,connected:ie.getConnectionStatus(),user:ie.getUser()},ie.on("update-ui",e.getData),ie.on("update-user",e.getData),e}return a}(r.a.Component),ue=a(4),de=a.n(ue),pe=function(e){var t=e.toggleSidebar;return r.a.createElement("div",{className:"main-navbar"},r.a.createElement(i.w,{className:"align-items-stretch bg-white flex-md-nowrap border-bottom p-0",type:"light"},r.a.createElement(i.x,{className:"w-100 mr-0",href:"#",style:{lineHeight:"25px"}},r.a.createElement("div",{className:"d-table m-auto"},r.a.createElement("img",{id:"main-logo",className:"d-inline-block align-top",style:{maxWidth:"50px"},src:"/jina-light.svg",alt:"Jina Dashboard"}))),r.a.createElement("span",{className:"toggle-sidebar d-sm-inline d-md-none d-lg-none",onClick:t},r.a.createElement("i",{className:"material-icons"},"\ue5c4"))))},ge=function(e){var t=e.item,a=e.toggleSidebar,n=t.items&&t.items.length,o=window.location.hash.substring(2,window.location.hash.length),c=!1;return t.matches.forEach((function(e){o.startsWith(e)&&(c=!0)})),r.a.createElement(i.u,{style:{position:"relative"}},r.a.createElement(i.v,{className:n&&"dropdown-toggle",tag:n?"a":l.c,to:n?"#":t.to,active:c,onClick:a},t.htmlBefore&&r.a.createElement("div",{className:"d-inline-block item-icon-wrapper",dangerouslySetInnerHTML:{__html:t.htmlBefore}}),t.title&&r.a.createElement("span",null,t.title),t.htmlAfter&&r.a.createElement("div",{className:"d-inline-block item-icon-wrapper",dangerouslySetInnerHTML:{__html:t.htmlAfter}})),n&&r.a.createElement(i.h,{tag:i.l,small:!0,open:t.open,style:{top:0}},t.items.map((function(e,t){return r.a.createElement(i.k,{key:t,tag:l.c,to:e.to},e.title)}))))},fe=function(e){var t=e.navItems,a=e.toggleSidebar;return r.a.createElement("div",{className:"nav-wrapper"},t.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("h6",{className:"main-sidebar__nav-title"},e.title),"undefined"!==typeof e.items&&e.items.length&&r.a.createElement(i.t,{className:"nav--no-borders flex-column"},e.items.map((function(e,t){return r.a.createElement(ge,{key:t,item:e,toggleSidebar:a})}))))})))},he=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).onChange=function(){n.setState(Object(k.a)(Object(k.a)({},n.state),{},{menuVisible:ie.getMenuState(),sidebarNavItems:ie.getSidebarItems()}))},n.toggleSidebar=function(){b.dispatch({actionType:L.a.TOGGLE_SIDEBAR})},n.state={menuVisible:ie.getMenuState(),sidebarNavItems:ie.getSidebarItems()},ie.on("update-ui",n.onChange),n}return Object(N.a)(a,[{key:"componentWillUnmount",value:function(){ie.removeListener("update-ui",this.onChange)}},{key:"render",value:function(){var e=this.state.sidebarNavItems,t=de()("main-sidebar","px-0","col-12",this.state.menuVisible&&"open");return r.a.createElement(i.g,{tag:"aside",className:t,lg:{size:2},md:{size:3}},r.a.createElement(pe,{toggleSidebar:this.toggleSidebar}),r.a.createElement(fe,{navItems:e,toggleSidebar:this.toggleSidebar}))}}]),a}(r.a.Component),be=function(e){var t=e.menuItems,a=e.copyright,n=e.loggerEnabled,o=e.enableLogger,c=e.disableLogger,l=e.exportLogs;return r.a.createElement("footer",{className:"main-footer d-flex p-2 px-3 bg-white border-top"},r.a.createElement(i.i,{fluid:!0},r.a.createElement(i.y,null,r.a.createElement(i.t,null,t.map((function(e,t){return r.a.createElement("a",{key:t,href:e.to,className:"nav-link"},e.title)})),n?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"nav-link text-warning cursor-pointer",onClick:c},"Exit Debug Mode"),r.a.createElement("span",{className:"nav-link text-warning cursor-pointer",onClick:l},"Export Debug Data")):r.a.createElement("span",{className:"nav-link text-warning cursor-pointer",onClick:o},"Debug Mode")),r.a.createElement("span",{className:"copyright ml-auto my-auto mr-2"},a))))};be.defaultProps={contained:!1,copyright:"Copyright \xa9 Jina AI Limited",menuItems:[{title:"Home",to:"https://jina.ai"},{title:"Opensource",to:"https://opensource.jina.ai"},{title:"Learn",to:"https://docs.jina.ai"},{title:"Community",to:"https://twitter.com/JinaAI_"},{title:"Jobs",to:"https://www.linkedin.com/company/jinaai/jobs/"},{title:"Privacy & Terms",to:"https://github.com/jina-ai/legal"}]};var ve=be,Ee=function(e){var t=e.children,a=e.noNavbar,n=e.noFooter;return r.a.createElement(i.i,{fluid:!0},r.a.createElement(i.y,null,r.a.createElement(he,null),r.a.createElement(i.g,{className:"main-content p-0",lg:{size:10,offset:2},md:{size:9,offset:3},sm:"12",tag:"main"},!a&&r.a.createElement(me,null),t,!n&&r.a.createElement(ve,null))))},ye=a(187);function we(e){var t=e.show,a=e.acceptCookies;return r.a.createElement("div",{className:"cookies-banner ".concat(t?"":"hidden")},r.a.createElement("p",{className:"mb-2"},'We and third parties use cookies or similar technologies ("Cookies") as described below to collect and process personal data, such as your IP address or browser information. You can learn more about how this site uses Cookies by reading our privacy policy linked below. By clicking "I consent to cookies", you accept the placement and use of these Cookies for these purposes. You can change your mind and revisit your preferences at any time by accessing the \u201cCookie Preferences\u201d link in the footer of this site.'),r.a.createElement(ye.a,{className:"ml-auto d-block",onClick:a},"I consent to cookies"))}function Ne(e){var t=e.data;return t?r.a.createElement("div",{className:"mr-4"},r.a.createElement("div",{className:"mb-0 banner px-4 banner-".concat(t.theme)},t.message)):""}var ke=a(580),Oe=a(188);function xe(e){var t=e.loading,a=e.connected,n=e.reconnect;return t||a?"":r.a.createElement("div",{className:"mb-0 banner px-3 banner-warning"},r.a.createElement(ke.a,null,r.a.createElement(Oe.a,{md:"8",className:"my-1"},"Could not connect to Jina instance. Please make sure your"," ",r.a.createElement("a",{href:"#/settings"},"settings")," are configured correctly."),r.a.createElement(Oe.a,{md:"4",className:"text-right"},r.a.createElement("a",{href:"https://github.com/jina-ai/dashboard#getting-started",target:"_blank",rel:"noopener noreferrer",className:"mr-2"},r.a.createElement(ye.a,{variant:"light"},"View Docs")),r.a.createElement(ye.a,{variant:"primary",onClick:n},r.a.createElement("i",{className:"material-icons mr-1"},"refresh"),"Try Again"))))}var Ce=a(586),_e=a(65),je=a.n(_e),Se={overlay:{backgroundColor:"rgba(38, 50, 56, 0.5)"},content:{border:"none",bottom:"auto",maxHeight:"80%",left:"50%",padding:"2rem",position:"fixed",right:"auto",top:"50%",transform:"translate(-50%,-50%)",width:"90%",maxWidth:"800px",overflow:"hidden"}},Le=function(e){var t,a=e.open,n=e.closeModal,o=e.importYAML;return r.a.createElement(je.a,{ariaHideApp:!1,isOpen:a,contentLabel:"Action Modal",className:"modal-content tiny-modal px-4 pt-3 pb-4",shouldCloseOnOverlayClick:!0,style:Se,onRequestClose:n,closeTimeoutMS:100},r.a.createElement("div",{className:"modal-header p-0"},r.a.createElement("h4",null,r.a.createElement("b",null,"Import YAML")),r.a.createElement("h4",null,r.a.createElement("span",{className:"float-right close-icon"},r.a.createElement("i",{className:"material-icons",onClick:n},"close")))),r.a.createElement("div",{className:"modal-body px-0 pb-0"},r.a.createElement(Ce.a.Group,null,r.a.createElement(Ce.a.Label,null,"Custom YAML:"),r.a.createElement(Ce.a.Control,{placeholder:"Paste Here",ref:function(e){return t=e},as:"textarea",rows:"10"}))),r.a.createElement(ye.a,{className:"btn-primary",onClick:function(){return o(t.value)}},"Continue"))},Ae={overlay:{backgroundColor:"rgba(38, 50, 56, 0.5)"},content:{border:"none",bottom:"auto",maxHeight:"80%",left:"50%",padding:"2rem",position:"fixed",right:"auto",top:"50%",transform:"translate(-50%,-50%)",width:"90%",maxWidth:"800px",overflow:"hidden"}},De=function(e){var t,a=e.open,n=e.closeModal,o=e.submitReview;return r.a.createElement(je.a,{ariaHideApp:!1,isOpen:a,contentLabel:"Action Modal",className:"modal-content tiny-modal px-4 pt-3 pb-4",shouldCloseOnOverlayClick:!0,style:Ae,onRequestClose:n,closeTimeoutMS:100},r.a.createElement("div",{className:"modal-header p-0"},r.a.createElement("h4",null,r.a.createElement("b",null,"Write a Review")),r.a.createElement("h4",null,r.a.createElement("span",{className:"float-right close-icon"},r.a.createElement("i",{className:"material-icons",onClick:n},"close")))),r.a.createElement("div",{className:"modal-body px-0 pb-0"},r.a.createElement(Ce.a.Group,null,r.a.createElement(Ce.a.Control,{placeholder:"Tell the world about your experience",ref:function(e){return t=e},as:"textarea",rows:"10"}))),r.a.createElement(ye.a,{className:"btn-primary",onClick:function(){return o(t.value)}},"Submit"))},Te={overlay:{backgroundColor:"rgba(38, 50, 56, 0.5)"},content:{border:"none",bottom:"auto",maxHeight:"80%",left:"50%",padding:"2rem",position:"fixed",right:"auto",top:"50%",transform:"translate(-50%,-50%)",width:"90%",maxWidth:"800px",overflow:"hidden"}},Ie=["msg","unixTime"],Fe=function(e){var t=e.open,a=e.closeModal,n=e.modalParams.log||{};return r.a.createElement(je.a,{ariaHideApp:!1,isOpen:t,contentLabel:"Action Modal",className:"modal-content tiny-modal px-4 pt-3 pb-4",shouldCloseOnOverlayClick:!0,style:Te,onRequestClose:a,closeTimeoutMS:100},r.a.createElement("div",{className:"modal-header p-0"},r.a.createElement("h4",null,r.a.createElement("b",null,"Log Details")),r.a.createElement("h4",null,r.a.createElement("span",{className:"float-right close-icon"},r.a.createElement("i",{className:"material-icons",onClick:a},"close")))),r.a.createElement("div",{className:"modal-body px-0 pb-0 pt-1"},r.a.createElement(ke.a,{className:"px-3"},r.a.createElement(Oe.a,{xs:"3",className:"border-bottom pb-1 px-0"},r.a.createElement("span",{className:"text-bold"},"msg")),r.a.createElement(Oe.a,{xs:"9",className:"border-bottom pb-1 px-0"},n.msg)),Object.entries(n).filter((function(e){var t=Object(O.a)(e,2),a=t[0];t[1];return!Ie.includes(a)})).map((function(e){var t=Object(O.a)(e,2),a=t[0],n=t[1];return"msg"===a?"":r.a.createElement(ke.a,{className:"px-3",key:a},r.a.createElement(Oe.a,{xs:"3",className:"border-bottom pb-1 px-0"},r.a.createElement("span",{className:"text-bold"},a)),r.a.createElement(Oe.a,{xs:"9",className:"border-bottom pb-1 px-0"},JSON.stringify(n)))}))))},Re=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).componentWillUnmount=function(){ie.removeListener("update-ui",e.getData)},e.getData=function(){var t=ie.getModal(),a=ie.getModalParams(),n=ie.isLoading(),r=ie.getBanner(),o=ie.getConnectionStatus(),c=K.isEnabled();e.setState({modal:t,loading:n,banner:r,connected:o,modalParams:a,loggerEnabled:c})},e.acceptCookies=function(){localStorage.setItem("accepted-cookies",!0),e.setState({acceptedCookies:!0})},e.closeModal=function(){b.dispatch({actionType:L.a.CLOSE_MODAL})},e.importYAML=function(e){b.dispatch({actionType:L.a.IMPORT_CUSTOM_YAML,payload:e})},e.submitReview=function(t){var a=e.state.modalParams.imageId;b.dispatch({actionType:L.a.POST_REVIEW,payload:{content:t,imageId:a}})},e.reconnect=function(){b.dispatch({actionType:L.a.RECONNECT})},e.enableLogger=function(){K.enable();var e=ie.getStoreCopy();K.log("Store Snapshot",e),b.dispatch({actionType:L.a.SHOW_BANNER,payload:['Debug Mode Enabled. Click "Export Debug Data" to download Debug JSON.',"warning"]})},e.disableLogger=function(){K.disable(),b.dispatch({actionType:L.a.SHOW_BANNER,payload:["Debug Mode Disabled.","warning"]})},e.exportLogs=function(){var e=ie.getStoreCopy();K.log("Store Snapshot",e),K.exportLogs()},e.render=function(){var t=e.state,a=t.modal,n=t.acceptedCookies,o=t.banner,c=t.connected,l=t.loading,s=t.modalParams,m=t.loggerEnabled,u=e.props.children;return r.a.createElement(i.i,{fluid:!0,className:"icon-sidebar-nav"},r.a.createElement(i.y,null,r.a.createElement(he,{hideLogoText:!0}),r.a.createElement(i.g,{className:"main-content col",tag:"main"},r.a.createElement(me,null),r.a.createElement(Ne,{data:o}),r.a.createElement(xe,{loading:l,connected:c,reconnect:e.reconnect}),u,r.a.createElement(we,{show:!n,acceptCookies:e.acceptCookies}),r.a.createElement(ve,{loggerEnabled:m,enableLogger:e.enableLogger,disableLogger:e.disableLogger,exportLogs:e.exportLogs}))),r.a.createElement(Fe,{open:"logDetails"===a,closeModal:e.closeModal,submitReview:e.submitReview,modalParams:s}),r.a.createElement(Le,{open:"import"===a,closeModal:e.closeModal,importYAML:e.importYAML}),r.a.createElement(De,{open:"review"===a,closeModal:e.closeModal,submitReview:e.submitReview}))},e.state={loggerEnabled:K.isEnabled(),modal:ie.getModal(),modalParams:ie.getModalParams(),loading:ie.isLoading(),banner:ie.getBanner(),connected:ie.getConnectionStatus(),acceptedCookies:localStorage.getItem("accepted-cookies")},ie.on("update-ui",e.getData),e}return a}(r.a.Component),Me=a(40),Pe=a(77),We=a(108);function Be(e){var t=e.title,a=e.subtitle,n=e.className,o=Object(We.a)(e,["title","subtitle","className"]),c=de()(n,"text-center","text-md-left","mb-sm-0");return r.a.createElement(i.g,Object.assign({xs:"12",sm:"3",className:c},o),r.a.createElement("span",{className:"text-uppercase page-subtitle"},a),r.a.createElement("h3",{className:"page-title"},t))}var He=a(191),Ue=a.n(He),Ge=a(581);function Ve(e){return r.a.createElement("div",{className:"command-bar-container"},r.a.createElement("div",{className:"command-bar"},r.a.createElement(Ge.a,null,r.a.createElement(ye.a,{variant:"secondary",disabled:!0},r.a.createElement("i",{className:"material-icons"},"play_arrow")),r.a.createElement(ye.a,{variant:"secondary",disabled:!0},r.a.createElement("i",{className:"material-icons"},"stop")),r.a.createElement(ye.a,{variant:"secondary",disabled:!0},r.a.createElement("i",{className:"material-icons"},"schedule")),r.a.createElement(ye.a,{variant:"secondary",onClick:e.importChart},r.a.createElement("i",{className:"material-icons"},"save_alt")),r.a.createElement(ye.a,{variant:"secondary",onClick:e.copyChart},r.a.createElement("i",{className:"material-icons"},"assignment")),r.a.createElement(ye.a,{variant:"secondary",onClick:function(){return e.exportImage("png")}},r.a.createElement("i",{className:"material-icons"},"camera_alt")))))}var Ye=a(582);function Je(e){var t=e.node,a=t.properties,n=t.label,o=[];Object.keys(a).forEach((function(e,t){a[e]&&"name"!==e&&o.push(r.a.createElement("div",{key:t},r.a.createElement("span",{className:"text-bold mr-1"},e,":"),a[e]))}));var c=Object.keys(a).length>0,l="gateway"===n,s="undefined"===typeof n?a.name:n||"";return r.a.createElement("div",{className:"chart-node ".concat(l?"gateway":""),id:"chart-node-".concat(n)},r.a.createElement("div",{className:"node-header"},r.a.createElement("div",{className:"p-1 ".concat(c?"special":"")},r.a.createElement("p",{className:"m-1"},r.a.createElement("span",{className:"text-bold"},s||r.a.createElement("span",{className:"text-warning"},"Empty Pod")),r.a.createElement(Ye.a,{variant:"primary",className:"ml-2 mt-1 py-1 px-2"},a.replicas)))),o.length>0&&r.a.createElement("div",{className:"node-info border-top px-2"},o))}function qe(e){var t=e.label,a=e.ports,r=e.properties,o=n.createRef();return n.createElement("div",{ref:o,className:"mb-3 draggable-container",draggable:!0,onDragStart:function(e){e.dataTransfer.setData(Me.REACT_FLOW_CHART,JSON.stringify({label:t,ports:a,properties:r,type:"hello world"}))}},n.createElement(Je,{node:{properties:r}}))}var Qe=a(192),ze=a(193),$e=a.n(ze),Ke=a(189),Xe=a(589),Ze=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(m.a)(this,a),(n=t.call(this)).getInitialNodeState=function(e){var t={},a=e.label;return Object.keys(e.properties).forEach((function(a){t[a]=e.properties[a]})),{label:a,id:e.id,properties:t,newProperties:{}}},n.componentWillReceiveProps=function(e){var t=e.chart,a=t.selected,r=t.nodes,o=a.id,c=a.type;if(o!==n.state.node.id&&(n.setState({searchResults:[],searchQuery:""}),o&&"node"===c&&o!==n.state.node.id)){var l=r[o];n.setState({node:n.getInitialNodeState(l)})}},n.updateLabel=function(e){n.setState((function(t){var a=t.node;return a.label=e,{node:a}}),n.saveChanges)},n.updateExistingValue=function(e,t){n.setState((function(a){var n=a.node;return n.properties[e]=t,{node:n}}),n.saveChanges)},n.updateNewValue=function(e,t){n.setState((function(a){var n=a.node;return n.newProperties[e]=t,{node:n}}),n.saveChanges)},n.saveChanges=function(){var e=n.state.node;n.props.updateNode(e)},n.updateSearchQuery=function(e){n.setState({searchQuery:e.target.value},n.searchProperties)},n.searchProperties=function(){var e=n.state.searchQuery;if(!e)return n.setState({searchResults:!1});n.indexProperties();var t=n.index.search("".concat(e," ").concat(e,"*"));n.setState({searchResults:t})},n.indexProperties=function(){var e=n.state.availableProperties;n.index=$e()((function(){var t=this;this.field("name"),e.forEach((function(e,a){e.id=parseInt(a),t.add(e)}))}))},n.renderEditNode=function(){var e=n.state,t=e.availableProperties,a=e.node,o=e.searchQuery,c=e.searchResults,l="undefined"===typeof a.label?a.properties.name:a.label||"";return r.a.createElement("div",{className:"h-100 d-flex flex-column"},r.a.createElement("div",{className:"p-2 mb-1"},r.a.createElement("p",{className:"mb-1"},r.a.createElement("b",null,"Pod Name")),r.a.createElement(Ke.a,{spellCheck:!1,value:l,onChange:function(e){return n.updateLabel(e.target.value)},className:"pod-name-input"})),r.a.createElement("p",{className:"mb-0 px-2"},r.a.createElement("b",null,"Properties")),r.a.createElement("div",{className:"m-2"},r.a.createElement(Ke.a,{spellCheck:!1,placeholder:"search properties...",value:o,onChange:n.updateSearchQuery})),r.a.createElement("div",{className:"property-table flex-fill mx-2"},o&&c?c.map((function(e){var o=t[e.ref],c=o.name,l=o.type,s=a.properties[c];return"undefined"==typeof s?r.a.createElement("div",{key:c,className:"property-item mb-2"},r.a.createElement("p",{className:"property-label mb-1"},c),r.a.createElement(Ke.a,{spellCheck:!1,placeholder:l,value:a.newProperties[c]||"",onChange:function(e){return n.updateNewValue(c,e.target.value)},className:"property-value-input"})):r.a.createElement("div",{key:c,className:"property-item mb-2"},r.a.createElement("p",{className:"property-label mb-1"},c),r.a.createElement(Ke.a,{spellCheck:!1,value:s||"",onChange:function(e){return n.updateExistingValue(c,e.target.value)},className:"property-value-input"}))})):r.a.createElement("div",null,Object.keys(a.properties).map((function(e){var t=a.properties[e];return"name"===e?"":r.a.createElement("div",{key:e,className:"property-item mb-2"},r.a.createElement("p",{className:"property-label mb-1"},e),r.a.createElement(Ke.a,{spellCheck:!1,value:t||"",onChange:function(t){return n.updateExistingValue(e,t.target.value)},className:"property-value-input"}))})),t.map((function(e){return"undefined"==typeof a.properties[e.name]?r.a.createElement("div",{key:e.name,className:"property-item mb-2"},r.a.createElement("p",{className:"property-label mb-1"},e.name),r.a.createElement(Ke.a,{spellCheck:!1,placeholder:e.type,value:a.newProperties[e.name]||"",onChange:function(t){return n.updateNewValue(e.name,t.target.value)},className:"property-value-input"})):""})))),r.a.createElement("div",{className:"p-2"},r.a.createElement(ye.a,{variant:"danger",className:"w-100",onClick:n.props.deleteSelection},"Delete Pod")))},n.renderEditLink=function(e){var t=n.props.chart.nodes,a=t[e.from.nodeId],o=t[e.to.nodeId],c=Object.keys(t).map((function(e){return{label:t[e].label||t[e].properties.name,id:e}}));return r.a.createElement("div",{className:"h-100 d-flex flex-column"},r.a.createElement("h5",{className:"px-3 py-2 mb-0 border-bottom"},r.a.createElement("b",null,"Edit Connection")),r.a.createElement("div",{className:"flex-fill px-2"},r.a.createElement("div",{className:"p-2 mb-1"},r.a.createElement("p",{className:"mb-1"},r.a.createElement("b",null,"From")),r.a.createElement(Ke.a,{className:"mb-2",as:"select",onChange:function(t){return n.props.updateLink(e.id,t.target.value,o.id)},value:a.id},c.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.label)}))),r.a.createElement("p",{className:"mb-1"},r.a.createElement("b",null,"To")),r.a.createElement(Ke.a,{className:"mb-2",as:"select",onChange:function(t){return n.props.updateLink(e.id,a.id,t.target.value)},value:o.id},c.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.label)}))))),r.a.createElement("div",{className:"p-2"},r.a.createElement(ye.a,{variant:"danger",className:"w-100",onClick:n.props.deleteSelection},"Delete Connection")))},n.renderPodMenu=function(){return r.a.createElement("div",{className:"d-flex flex-column h-100"},r.a.createElement("h5",{className:"px-3 py-2 mb-0 border-bottom"},r.a.createElement("b",null,"Add Pods")),r.a.createElement("div",{className:"p-3 scrollable flex-fill"},r.a.createElement(qe,{ports:{inPort:{id:"inPort",type:"input"},outPort:{id:"outPort",type:"output"}},properties:{}}),Qe.map((function(e,t){return r.a.createElement(qe,{key:t,ports:{inPort:{id:"inPort",type:"input"},outPort:{id:"outPort",type:"output"}},properties:e})}))))},n.renderReadOnly=function(){return r.a.createElement("div",{className:"readonly-overlay py-4 px-4 text-center"},r.a.createElement("h4",{className:"my-4"},r.a.createElement("b",null,"This flow is ",r.a.createElement("span",{className:"text-muted"},"readonly"))),r.a.createElement("p",{className:"my-4"},"To edit this flow, please duplicate it."),r.a.createElement(ye.a,{onClick:n.props.duplicateFlow},"Duplicate Flow"))},n.render=function(){var e=n.props,t=e.chart,a=e.readonly,o=t.selected,c=t.nodes,l=t.links,s=Object.keys(o).length>0;return r.a.createElement(Xe.a,{className:"flowchart-sidebar mb-4"},s?"link"===o.type?n.renderEditLink(l[o.id],c):n.renderEditNode(c[o.id]):n.renderPodMenu(),a&&n.renderReadOnly())};var o={};if(e.chart.selected.id){var c=e.chart.nodes[e.chart.selected.id];o=n.getInitialNodeState(c)}return n.state={availableProperties:ie.getAvailableProperties(),node:o,searchResults:[],searchQuery:""},n}return a}(r.a.Component);function et(){return r.a.createElement("div",{className:"node-port"},r.a.createElement("i",{className:"fa fa-chevron-down","data-html2canvas-ignore":"true"}))}var tt=a(206);function at(e){return e.selected?r.a.createElement("i",{className:"material-icons text-primary"},"radio_button_checked"):r.a.createElement("i",{className:"material-icons"},"radio_button_unchecked")}function nt(e){var t=e.connected;return e.show?t?r.a.createElement("i",{className:"material-icons ml-2 text-success"},"wifi"):r.a.createElement("i",{className:"material-icons ml-2 text-warning"},"wifi_off"):null}function rt(e){var t=e.connected;return e.show?t?r.a.createElement("i",{className:"material-icons text-white ml-1 mr-2"},"wifi"):r.a.createElement("i",{className:"material-icons text-warning ml-1 mr-2"},"wifi_off"):null}function ot(e){var t=e.show,a=e.deleteFlow;return t?r.a.createElement("i",{className:"material-icons text-danger float-right",onClick:a},"delete"):null}function ct(e){var t=e.isEditing,a=e.onClick;return t?r.a.createElement("i",{onClick:a,className:"material-icons float-right cursor-pointer text-success"},"done"):r.a.createElement("i",{onClick:a,className:"material-icons float-right cursor-pointer"},"edit")}function lt(e){var t=e.flows,a=e.loadFlow,o=e.selectedFlowId,c=e.createNewFlow,l=e.deleteFlow,s=e.connected,i=Object(n.useState)(!1),m=Object(O.a)(i,2),u=m[0],d=m[1],p=Object.entries(t).filter((function(e){var t=Object(O.a)(e,2);t[0];return"example"!==t[1].type})),g=Object.entries(t).filter((function(e){var t=Object(O.a)(e,2);t[0];return"example"===t[1].type})),f=t[o];return r.a.createElement(tt.a,{className:"flow-selection"},r.a.createElement(tt.a.Toggle,null,f.name,r.a.createElement(rt,{show:"remote"===f.type,connected:s})),r.a.createElement(tt.a.Menu,null,r.a.createElement(tt.a.Item,{onClick:c},r.a.createElement("i",{className:"material-icons"},"add"),"New Flow"),r.a.createElement(tt.a.Header,{className:"text-uppercase"},"Your Flows"," ",r.a.createElement(ct,{isEditing:u,onClick:function(){d((function(e){return!e}))}})),p.map((function(e,t){var n=Object(O.a)(e,2),c=n[0],i=n[1];return r.a.createElement(tt.a.Item,{onClick:function(){return a(c)},key:t},r.a.createElement(at,{selected:c===o}),i.name,r.a.createElement(nt,{show:"remote"===i.type,connected:s}),r.a.createElement(ot,{show:"user-generated"===i.type&&u,deleteFlow:function(e){return l(e,c)}}))})),r.a.createElement(tt.a.Header,{className:"text-uppercase"},"Examples"),g.map((function(e,t){var n=Object(O.a)(e,2),c=n[0],l=n[1];return r.a.createElement(tt.a.Item,{onClick:function(){return a(c)},key:t},r.a.createElement(at,{itemId:c,selectedId:o}),l.name)}))))}var st=["onDragNodeStop","onCanvasDrop","onCanvasClick","onNodeClick","onDragCanvasStop","updateNode","updateLink"],it=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(m.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){document.querySelector(".chart-container").addEventListener("contextmenu",(function(e){return e.preventDefault()}))},n.componentWillUnmount=function(){ie.removeListener("update-flowchart",n.getData),ie.removeListener("update-ui",n.getConnectionStatus)},n.exportImage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"png";document.querySelector(".capture-overlay").classList.add("fade-out"),n.showCaptureOverlay(),setTimeout((function(){return n.showCaptureOverlay(!1)}),500);var t={foreignObjectRendering:!0,logging:!0,x:0,y:0,scrollX:0,scrollY:0,scale:5};Ue()(document.querySelector(".chart-container"),t).then((function(t){var a=t.toDataURL("image/".concat(e)),n=document.getElementById("download-link");n.setAttribute("download","jina-flow-visual.".concat(e)),n.setAttribute("href",a),n.click()}))},n.showCaptureOverlay=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n.setState({showOverlay:e})},n.getData=function(){var e=ie.getFlowchart(),t=e.flow,a=e.type,r=ie.getSelectedFlowId(),o=ie.getFlows();n.setState({chart:t,flowType:a,selectedFlowId:r,flows:o})},n.getConnectionStatus=function(){var e=ie.getConnectionStatus();n.setState({connected:e})},n.updateNode=function(e,t){var a=n.state.chart,r=Object(C.cloneDeep)(a);r.nodes[e.id].label=e.label;var o=Object(k.a)(Object(k.a)({},e.properties),e.newProperties);return Object.keys(o).forEach((function(e){""!==o[e]&&"undefined"!==typeof o[e]||delete o[e]})),r.nodes[e.id].properties=o,n.updateFlow(Object(k.a)(Object(k.a)({},a),r),"updateNode"),r.nodes[e.id]},n.updateLink=function(e,t,a){if(t!==a){var r=n.state.chart,o=Object(C.cloneDeep)(r);o.links[e].from.nodeId=t,o.links[e].to.nodeId=a,n.updateFlow(Object(k.a)(Object(k.a)({},r),o),"updateLink")}},n.cancelChanges=function(){n.stateActionCallbacks.onCanvasClick({})},n.deleteSelection=function(){n.stateActionCallbacks.onDeleteKey({})},n.updateFlow=function(e,t){if(st.includes(t))return n.syncFlow(e);n.setState({chart:e})},n.syncFlow=function(e){b.dispatch({actionType:L.a.UPDATE_FLOW,payload:e})},n.selectNode=function(e){b.dispatch({actionType:L.a.SELECT_NODE,payload:e.nodeId})},n.copyChartAsYAML=function(){P(H(n.state.chart)),alert("Chart copied to clipboard as YAML")},n.validateLink=function(e){var t=e.fromNodeId,a=e.toNodeId,n=e.fromPortId,r=e.toPortId;return!(t===a||n===r)},n.showImportModal=function(){b.dispatch({actionType:L.a.SHOW_MODAL,payload:{modal:"import"}})},n.loadFlow=function(e){b.dispatch({actionType:L.a.LOAD_FLOW,payload:e})},n.createNewFlow=function(e){e.preventDefault(),e.stopPropagation(),b.dispatch({actionType:L.a.CREATE_NEW_FLOW})},n.deleteFlow=function(e,t){e.preventDefault(),e.stopPropagation(),b.dispatch({actionType:L.a.DELETE_FLOW,payload:t})},n.duplicateFlow=function(){var e=H(n.state.chart);b.dispatch({actionType:L.a.DUPLICATE_FLOW,payload:e})},n.render=function(){var e=n.state,t=e.chart,a=e.flows,o=e.selectedFlowId,c=e.showOverlay,l=e.connected,s="user-generated"!==e.flowType;return r.a.createElement(i.i,{fluid:!0,className:"main-content-container px-0"},r.a.createElement("div",{className:"px-4"},r.a.createElement("a",{href:"/#",id:"download-link",style:{display:"none"}},"download"),r.a.createElement(i.y,{noGutters:!0,className:"page-header py-4"},r.a.createElement(Be,{title:"Flow Design",subtitle:"Network",className:"text-sm-left mb-3"})),r.a.createElement("div",{className:"flow-container d-flex flex-column flex-md-row"},r.a.createElement(i.d,{className:"chart-section-container p-1 mr-md-4 mb-4"},r.a.createElement(lt,{connected:l,flows:a,selectedFlowId:o,createNewFlow:n.createNewFlow,loadFlow:n.loadFlow,deleteFlow:n.deleteFlow}),r.a.createElement(Ve,{copyChart:n.copyChartAsYAML,importChart:n.showImportModal,exportImage:n.exportImage}),r.a.createElement("div",{className:"chart-container"},r.a.createElement("div",{className:"capture-overlay",style:{display:c?"":"none"}},r.a.createElement("div",{className:"capture-overlay-top"}),r.a.createElement("div",{className:"capture-overlay-bottom"})),r.a.createElement(Me.FlowChart,{chart:t,Components:{NodeInner:Je,Port:et},callbacks:n.stateActionCallbacks,config:{readonly:s,validateLink:n.validateLink}}))),r.a.createElement(Ze,{duplicateFlow:n.duplicateFlow,readonly:s,chart:t,cancelChanges:n.cancelChanges,deleteSelection:n.deleteSelection,updateNode:n.updateNode,updateLink:n.updateLink}))))};var o=ie.getFlowchart(),c=o.flow,l=o.type,s=ie.getSelectedFlowId(),u=ie.getFlows(),d=ie.getConnectionStatus();return n.state={flowType:l,connected:d,chart:c,selectedFlowId:s,flows:u,showOverlay:!1},n.stateActionCallbacks=Object.keys(Pe).reduce((function(e,t,a){return e[t]=function(){var e=n.state.chart,a=Pe[t],r=a.apply(void 0,arguments),o=r(e);return n.updateFlow(Object(k.a)(Object(k.a)({},e),o),t),o},e}),{}),ie.on("update-ui",n.getConnectionStatus),ie.on("update-flowchart",n.getData),n}return a}(r.a.Component),mt=a(584),ut=a(37),dt=a.n(ut),pt={INFO:{borderColor:"#009999",backgroundColor:"rgba(0, 153, 153, 0.9)"},SUCCESS:{borderColor:"#32c8cd",backgroundColor:"rgba(50, 200, 205, 0.9)"},WARNING:{borderColor:"#ffcc66",backgroundColor:"rgba(255, 204, 102, 0.9)"},ERROR:{borderColor:"#ff6666",backgroundColor:"rgba(255, 102, 102, 0.9)"},CRITICAL:{borderColor:"#ff4540",backgroundColor:"rgba(255, 70, 64, 0.9)"},DEBUG:{borderColor:"#6E7278",backgroundColor:"rgba(110, 114, 120, 0.9)"}},gt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.renderChart()},n.renderChart=function(){var e={events:["click"],onClick:n.onClick,maintainAspectRatio:!0,responsive:!0,legend:{position:"top",labels:{padding:10,boxWidth:15}},tooltips:{enabled:!1,custom:!1},elements:{point:{radius:0,hitRadius:20}},scales:{xAxes:[{ticks:{padding:5,maxRotation:0,callback:n.getXAxisLabel}}],yAxes:[{scaleLabel:{display:!0,labelString:"Occurences"},gridLines:{labelString:"hello",borderDash:[2.5,5],zeroLineColor:"#6c757d",drawBorder:!1,color:"#6c757d"},ticks:{padding:5,suggestedMin:0,autoSkip:!0,maxTicksLimit:4,callback:function(e){if(Number.isInteger(e))return e}}}]}},t=Object(k.a)({onClick:n.onClick,type:"line",labels:n.getLabels(60),data:{datasets:n.getParsedDatasets()},options:e},n.props.chartConfig);n.chart=new dt.a(n.canvasRef.current,t)},n.updateChart=function(){var e={labels:n.getLabels(60),datasets:n.getParsedDatasets()};n.chart.data=e,n.chart.options.animation=!1,n.chart.update()},n.onClick=function(e){var t=n.chart.getElementsAtEvent(e);n.props.onClick(t)},n.getLabels=function(e){for(var t=[],a=0;a<e;++a)t.push(a);return t},n.getXAxisLabel=function(e,t,a){return 0===t?a.length+"s ago":t===parseInt(a.length/2)?t+"s ago":void 0},n.getParsedDatasets=function(){var e=n.props.data;return Object.keys(pt).map((function(t){var a=e.map((function(e){return e.levels[t]}));return{label:t,fill:"start",borderWidth:1.5,borderColor:pt[t].borderColor,backgroundColor:pt[t].backgroundColor,data:a}}))},n.render=function(){n.canvasRef.current&&n.chart&&n.updateChart();var e=n.props,t=e.width,a=e.height;return r.a.createElement("div",{className:"graph-container"},r.a.createElement("canvas",{height:a||10,width:t||100,ref:n.canvasRef}))},n.canvasRef=r.a.createRef(),n}return a}(r.a.Component),ft=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).componentWillUnmount=function(){ie.removeListener("update-summary-chart",e.getData)},e.showLog=function(t){var a=e.state.chartData,n=t[0]&&t[0]._index;console.log("index:",n),n&&"undefined"!==typeof n&&b.dispatch({actionType:L.a.SHOW_LOG_AT_INDEX,payload:a[n].lastLog})},e.getData=function(){var t=ie.getLogLevelCharts();e.setState({chartData:t})},e.render=function(){var t=e.state.chartData;return r.a.createElement(Xe.a,{className:"h-100"},r.a.createElement(Xe.a.Header,null,"Log Occurences by Level"),r.a.createElement(Xe.a.Body,{className:"d-none d-md-block pb-2 pt-0"},r.a.createElement(gt,{data:t,height:10,width:70,onClick:e.showLog})),r.a.createElement(Xe.a.Body,{className:"d-md-none pb-2"},r.a.createElement(gt,{data:t,height:20,width:50,onClick:e.showLog})))},e.state={chartData:ie.getLogLevelCharts()},ie.on("update-summary-chart",e.getData),e}return a}(r.a.Component),ht=[{border:"#fff",background:"rgba(0, 153, 153, 0.85)"},{border:"#fff",background:"rgba(0, 153, 153, 0.75)"},{border:"#fff",background:"rgba(0, 153, 153, 0.65)"},{border:"#fff",background:"rgba(0, 153, 153, 0.55)"},{border:"#fff",background:"rgba(0, 153, 153, 0.45)"},{border:"#fff",background:"rgba(0, 153, 153, 0.35)"},{border:"#fff",background:"rgba(0, 153, 153, 0.25)"},{border:"#fff",background:"rgba(0, 153, 153, 0.15)"},{border:"#fff",background:"rgba(0, 153, 153, 0.05)"}],bt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.renderChart()},n.getColor=function(e){for(var t=!1;!t;)ht[e]?t=ht[e]:e-=ht.length;return t},n.renderChart=function(){var e=n.props.data,t=Object.keys(e),a=Object(k.a)({type:"pie",labels:t,data:{datasets:[{borderWidth:1,data:t.map((function(t){return e[t]})),borderColor:t.map((function(e,t){return n.getColor(t).border})),backgroundColor:t.map((function(e,t){return n.getColor(t).background}))}]},options:{legend:{display:!1,position:"bottom",labels:{padding:25,boxWidth:20}},tooltips:{custom:!1,mode:"index",position:"nearest"}}},n.props.chartConfig);n.chart=new dt.a(n.canvasRef.current,a)},n.updateChart=function(){var e=n.props.data,t=Object.keys(e),a={labels:t,datasets:[{borderWidth:1,data:t.map((function(t){return e[t]})),borderColor:t.map((function(e,t){return n.getColor(t).border})),backgroundColor:t.map((function(e,t){return n.getColor(t).background}))}]};n.chart.data=a,n.chart.options.animation=!1,n.chart.update()},n.render=function(){n.canvasRef.current&&n.chart&&n.updateChart();var e=n.props,t=e.width,a=e.height;return r.a.createElement("div",{className:"graph-container"},r.a.createElement("canvas",{height:a||50,width:t||50,ref:n.canvasRef}))},n.canvasRef=r.a.createRef(),n}return a}(r.a.Component),vt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).componentWillUnmount=function(){ie.removeListener("update-summary-chart",e.getData)},e.getData=function(){var t=ie.getLogLevelOccurences();e.setState({chartData:t})},e.render=function(){var t=e.state.chartData;return r.a.createElement(Xe.a,{className:"h-100"},r.a.createElement(Xe.a.Header,{className:"text-center"},"Log Levels"),r.a.createElement(Xe.a.Body,{className:"pt-0"},r.a.createElement(bt,{data:t})))},e.state={chartData:ie.getLogLevelOccurences()},ie.on("update-summary-chart",e.getData),e}return a}(r.a.Component),Et=a(9),yt=a(199);var wt=a(109),Nt=a(207),kt={container:function(e,t){var a=t.selectProps.width;return Object(k.a)(Object(k.a)({},e),{},{width:a})}};function Ot(e){var t=e.onFilterChange,a=e.options,n=Object(We.a)(e,["onFilterChange","options"]);return r.a.createElement(Nt.a,Object.assign({onChange:function(e){return t(Array.isArray(e)?e:e?[e]:[])},isMulti:!0,options:a,styles:kt},n))}var xt=Object(n.memo)((function(e){var t=e.index,a=e.style,n=e.data,r=n.columns,o=n.items,c=n.showLogDetails,l=o[t],s=l.name,i=l.msg,m=l.levelname,u=l.process,d=l.formattedTimestamp,p=l.idx,g=String(s);g=g.length>20?g.substring(0,20):g;var f=String(m)[0],h=r.firstCol,b=r.secondCol,v=r.thirdCol;return Object(Et.d)("div",{className:"log log-".concat(String(m).toLowerCase()," px-4 border-bottom py-1"),css:{maxHeight:84},style:a,onClick:function(){return c(l)}},Object(Et.d)(ke.a,null,Object(Et.d)(Oe.a,{className:"log-prefix text-muted px-0 d-flex flex-row",css:{maxWidth:h}},Object(Et.d)("div",{className:"text-bold mr-2"},p),Object(Et.d)("div",{className:"ml-auto"},d)),Object(Et.d)(Oe.a,{className:"log-prefix px-0 text-left text-md-right text-bold cursor-pointer",css:{maxWidth:b}},g,"@",u,"[",f,"]:"),Object(Et.d)(Oe.a,{className:"px-0",css:{maxHeight:84,display:"block",overflow:"hidden",textOverflow:"ellipsis",width:v,whiteSpace:"nowrap",paddingRight:0,marginRight:0}},i)))}),wt.b),Ct=a(583),_t=a(200);function jt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=Object(n.useRef)(!1),r=Object(n.useRef)(),o=Object(n.useRef)(e),c=Object(n.useCallback)((function(){return a.current}),[]),l=Object(n.useCallback)((function(){a.current=!1,r.current&&clearTimeout(r.current),r.current=setTimeout((function(){a.current=!0,o.current()}),t)}),[t]),s=Object(n.useCallback)((function(){a.current=null,r.current&&clearTimeout(r.current)}),[]);return Object(n.useEffect)((function(){o.current=e}),[e]),Object(n.useEffect)((function(){return l(),s}),[t]),[c,s,l]}var St=["INFO","SUCCESS","WARNING","ERROR","CRITICAL","DEBUG"],Lt={fields:["filename","funcName","msg","name","module","pathname"]},At=function(e){return"jina-logs-".concat(new Date,".").concat(e)},Dt=function(e,t){return t.items[e].id},Tt=function(e){return(t=e,Array.isArray(t)?t:Array.from(t)).map((function(e){return{label:e,value:e}}));var t};function It(e){var t=e.data,a=e.showLogDetails,o=r.a.useState(!0),c=Object(O.a)(o,2),l=c[0],s=c[1],i=Object(n.useRef)(),m=r.a.useState([]),u=Object(O.a)(m,2),d=u[0],p=u[1],g=r.a.useState([]),f=Object(O.a)(g,2),h=f[0],b=f[1],v=r.a.useState(""),E=Object(O.a)(v,2),y=E[0],w=E[1],N=Object(yt.useMiniSearch)(t,Lt),k=N.search,x=N.searchResults,C=N.addAllAsync,_=Object(n.useRef)([]),j=function(e){var t=r.a.useRef();return r.a.useEffect((function(){t.current=e}),[e]),t.current}(t.length);Object(n.useEffect)((function(){if(j&&j>0){var e=t[j-1];C([e]),_.current.push(e)}}),[j,y]);var S=((y?x:t)||[]).filter((function(e){return t=e,a={levelname:h.map((function(e){return e.value})),name:d.map((function(e){return e.value}))},Object.entries(a).reduce((function(e,a){var n=Object(O.a)(a,2),r=n[0],o=n[1];return e&&Array.isArray(o)?0===o.length||o.includes(t[r]):o===t[r]}),!0);var t,a})),L=t.reduce((function(e,t){return e.add(t.name)}),new Set);return Object(n.useEffect)((function(){i.current&&l&&i.current.scrollToItem(S.length)}),[S.length,l]),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=jt(e,t),o=Object(O.a)(r,3),c=o[0],l=o[1],s=o[2];Object(n.useEffect)(s,a)}((function(){k(y)}),1e3,[y]),Object(Et.d)(Xe.a,{className:"mb-4"},Object(Et.d)(Xe.a.Header,{className:"p-3"},Object(Et.d)(ke.a,null,Object(Et.d)(Oe.a,{md:"8"},Object(Et.d)(Ot,{options:Tt(L),onFilterChange:p,className:"logstream-select mb-2 mr-0 mb-md-0 mr-md-2",placeholder:"All Logsources"}),Object(Et.d)(Ot,{options:Tt(St),onFilterChange:b,className:"logstream-select mb-2 mr-0 mb-md-0 mr-md-2",placeholder:"All Levels"}),Object(Et.d)(Ct.a,{as:Ge.a,title:"Download Logs",id:"bg-nested-dropdown"},Object(Et.d)(tt.a.Item,{onClick:function(){return Object(Y.saveAs)(F(function(e){return e.reduce((function(e,t){return e+="".concat(t.created,',"').concat(t.formattedTimestamp,'",').concat(t.name,",").concat(t.process,",").concat(t.levelname,',"').concat(t.msg,'",').concat(t.filename,",").concat(t.lineno,",").concat(t.module,",").concat(t.funcname,",").concat(t.pathname,"\n")}),"created,formatted timestamp,name,process,level name,message,filename,line number,module,funcname,pathname\n")}(t)),At("csv"))}},"Download as CSV"),Object(Et.d)(tt.a.Item,{onClick:function(){return Object(Y.saveAs)(R(t),At("json"))}},"Download as JSON"),Object(Et.d)(tt.a.Item,{onClick:function(){return Object(Y.saveAs)(F(function(e){return e.reduce((function(e,t){return e+="".concat(t.formattedTimestamp," ").concat(t.name,"@").concat(t.process," [").concat(t.levelname,"]: ").concat(t.msg,"\n")}),"")}(t)),At("txt"))}},"Download as TXT"))),Object(Et.d)(Oe.a,{md:"4"},Object(Et.d)(Ce.a.Control,{placeholder:"search logs...",value:y,onChange:function(e){w(e.target.value)}})))),Object(Et.d)(Xe.a.Body,{className:"log-stream-container p-1 border-top",id:"log-stream-container"},!l&&Object(Et.d)("div",{onClick:function(){return i.current.scrollToItem(S.length)},className:"back-to-bottom active"},Object(Et.d)("i",{className:"material-icons"},"arrow_downward")," Back to Bottom"),Object(Et.d)(_t.a,null,(function(e){var t=e.height,n=e.width,r=n-600;return Object(Et.d)(wt.a,{onScroll:function(e){var a=e.scrollOffset;s((a+t)/30-S.length===0)},height:t,width:n,itemCount:S.length,itemSize:30,itemKey:Dt,itemData:{items:S,columns:{firstCol:300,secondCol:300,thirdCol:r},showLogDetails:a},ref:i},xt)}))))}var Ft=function(e){b.dispatch({actionType:L.a.SHOW_MODAL,payload:{modal:"logDetails",modalParams:{log:e}}})};function Rt(e){var t=e.elapsed;return r.a.createElement(i.d,{className:"p-3 h-100"},r.a.createElement("h6",{className:"stats-small__label text-uppercase text-center mb-0"},r.a.createElement("b",null,t.task_name)),r.a.createElement("h2",{className:"my-3 mx-auto"},t.seconds),r.a.createElement("h6",{className:"stats-small__label text-uppercase text-center"},"Elapsed Time"))}var Mt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).updateChart=function(){var e=n.props.progress,t=100*(e.num_bars/e.bar_len||1),a={datasets:[{hoverBorderColor:"#fff",data:[t,100-t],backgroundColor:["#32c8cd","#E9ECEF"]}],labels:["Label 1","Label 2"]};n.chart.data=a,n.chart.update()},n.canvasRef=r.a.createRef(),n}return Object(N.a)(a,[{key:"componentDidMount",value:function(){this.chart=new dt.a(this.canvasRef.current,{type:"doughnut",data:{datasets:[{hoverBorderColor:"#fff",data:[0,100],backgroundColor:["#32c8cd","#E9ECEF"]}],labels:["Label 1","Label 2"]},options:{legend:!1,responsive:!1,cutoutPercentage:70,animation:!1,tooltips:!1}})}},{key:"render",value:function(){var e=this.props.progress;return this.chart&&this.updateChart(),r.a.createElement(i.d,{className:"p-3 h-100"},r.a.createElement("h6",{className:"stats-small__label text-uppercase text-center"},r.a.createElement("b",null,"Progress")),r.a.createElement("div",{className:"go-stats__chart mx-auto d-flex flex-row"},r.a.createElement("div",{className:"mr-4 mt-3"},r.a.createElement("h6",{className:"stats-small__label text-uppercase text-center"},"Request"),r.a.createElement("h4",{className:"mb-0"},e.currentRequest)),r.a.createElement("canvas",{ref:this.canvasRef,style:{width:"100px",height:"100px"},className:"my-auto"})))}}]),a}(r.a.Component),Pt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).updateChart=function(){var e=n.props.speed.history,t=Object(k.a)(Object(k.a)({},n.chart.data),{datasets:[{label:"Today",fill:"start",borderWidth:1.5,backgroundColor:"rgba(0, 153, 153, 0.25)",borderColor:"#009999",data:e}]}),a=Math.max.apply(Math,Object(w.a)(e)),r=Math.min.apply(Math,Object(w.a)(e)),o=a-r;n.chart.options.scales.yAxes[0].ticks.suggestedMax=a+.1*o,n.chart.options.scales.yAxes[0].ticks.suggestedMin=r-.1*o,n.chart.data=t,n.chart.update()},n.canvasRef=r.a.createRef(),n}return Object(N.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.speed.history,t=Math.max.apply(Math,Object(w.a)(e)),a=Math.min.apply(Math,Object(w.a)(e)),n=t-a,r=Object(k.a)(Object(k.a)({},{maintainAspectRatio:!0,responsive:!0,animation:!1,legend:{display:!1},tooltips:{enabled:!1,custom:!1},elements:{point:{radius:0},line:{tension:.33}},scales:{xAxes:[{gridLines:!1,ticks:{display:!1}}],yAxes:[{gridLines:!1,scaleLabel:!1,ticks:{display:!1,suggestedMax:t+.1*n,suggestedMin:a-.1*n}}]}}),this.props.chartOptions),o=Object(k.a)(Object(k.a)({},{type:"line",data:Object(k.a)(Object(k.a)({},{labels:new Array(e.length).fill(null)}),{datasets:[{label:"Today",fill:"start",borderWidth:1.5,backgroundColor:"rgba(0, 153, 153, 0.25)",borderColor:"#009999",data:e}]}),options:r}),this.props.chartConfig);this.chart=new dt.a(this.canvasRef.current,o)}},{key:"render",value:function(){var e=this.props.speed;return this.chart&&this.updateChart(),r.a.createElement(i.d,{className:"pt-0 h-100 stats-small"},r.a.createElement("div",{className:"stats-small__data mx-auto"},r.a.createElement("h6",{className:"stats-small__label text-uppercase text-center mb-0 pt-0 mt-0"},r.a.createElement("b",null,"Speed")),r.a.createElement("h2",{className:"my-3 mx-auto"},e.current),r.a.createElement("h6",{className:"stats-small__label under text-uppercase text-center"},e.unit,"/Second")),r.a.createElement("canvas",{height:"100",ref:this.canvasRef,className:"stats-small-1"}))}}]),a}(r.a.Component);Pt.defaultProps={label:"New Customers",value:"29",percentage:"2.71%",increase:!1,decrease:!0,chartLabels:[null,null,null,null,null,null,null],chartData:[{label:"Today",fill:"start",borderWidth:1.5,backgroundColor:"rgba(0, 153, 153, 0.25)",borderColor:"#009999",data:[1,7,1,3,1,4,8]}]};var Wt=Pt,Bt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).componentDidUpdate=function(e){n.props.lastUpdate!==e.lastUpdate&&n.updateChart()},n.componentDidMount=function(){var e=n.state.tab,t=n.props[e],a=Object(k.a)({},{animation:!1,tooltips:{callbacks:{title:function(e,t){return"Pod: ".concat(e[0].xLabel)},label:function(e,t){var a=n.state.tab,r="".concat(t.datasets[e.datasetIndex].label,": ").concat("bytes"===a?U(e.value):e.value);return r},afterLabel:function(e,t){var a=n.state.tab;return"\nProcess ID: "+n.props[a][e.index].process}}},scales:{xAxes:[{stacked:!0,gridLines:!1}],yAxes:[{stacked:!0,ticks:{userCallback:n.formatYAxisLabel}}]}});n.chart=new dt.a(n.canvasRef.current,{type:"bar",options:a,data:{labels:t.map((function(e){return e.node})),datasets:[{label:"msg sent",fill:"start",data:t.map((function(e){return e.sent})),backgroundColor:"#009999",borderColor:"#009999",pointBackgroundColor:"#FFFFFF",pointHoverBackgroundColor:"#009999",borderWidth:1.5},{label:"msg received",fill:"start",data:t.map((function(e){return e.received})),backgroundColor:"#32C8CD",borderColor:"#32C8CD",pointBackgroundColor:"#FFFFFF",pointHoverBackgroundColor:"#32C8CD",borderWidth:1.5}]}})},n.updateChart=function(){var e=n.state.tab,t=n.props[e];n.chart.data={labels:t.map((function(e){return e.node})),datasets:[{label:"".concat(e," sent"),fill:"start",data:t.map((function(e){return e.sent})),backgroundColor:"#009999",borderColor:"#009999",pointBackgroundColor:"#FFFFFF",pointHoverBackgroundColor:"#009999",borderWidth:1.5},{label:"".concat(e," received"),fill:"start",data:t.map((function(e){return e.received})),backgroundColor:"#32C8CD",borderColor:"#32C8CD",pointBackgroundColor:"#FFFFFF",pointHoverBackgroundColor:"#32C8CD",borderWidth:1.5}]},n.chart.update()},n.formatYAxisLabel=function(e){return"bytes"===n.state.tab?U(e):e>999?"".concat((e/1e3).toFixed(0),"k"):e},n.setTab=function(e){n.setState({tab:e},n.updateChart)},n.canvasRef=r.a.createRef(),n.state={tab:"messages"},n}return Object(N.a)(a,[{key:"render",value:function(){var e=this,t=this.state.tab;return r.a.createElement(i.d,{small:!0,className:"h-100 mb-4"},r.a.createElement(i.f,{className:"border-bottom"},r.a.createElement("h6",{className:"m-0"},"Network Load")),r.a.createElement(i.e,{className:"pt-0"},r.a.createElement(i.y,{className:"border-bottom py-2 bg-light"},r.a.createElement(i.g,{sm:"6",className:"col d-flex mb-2 mb-sm-0"},r.a.createElement(i.c,null,r.a.createElement(i.b,{theme:"white",active:"messages"===t,onClick:function(){return e.setTab("messages")}},"Messages"),r.a.createElement(i.b,{theme:"white",active:"bytes"===t,onClick:function(){return e.setTab("bytes")}},"Bytes")))),r.a.createElement("canvas",{height:"100",ref:this.canvasRef,style:{maxWidth:"100% !important"},className:"sales-overview-sales-report"})))}}]),a}(r.a.Component),Ht=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).updateChart=function(){var e=n.props.qps.history,t=Object(k.a)(Object(k.a)({},n.chart.data),{datasets:[{label:"Today",fill:"start",borderWidth:1.5,backgroundColor:"rgba(50, 200, 205, 0.25)",borderColor:"#32c8cd",data:e}]}),a=Math.max.apply(Math,Object(w.a)(e)),r=Math.min.apply(Math,Object(w.a)(e)),o=a-r;n.chart.options.scales.yAxes[0].ticks.suggestedMax=a+.1*o,n.chart.options.scales.yAxes[0].ticks.suggestedMin=r-.1*o,n.chart.data=t,n.chart.update()},n.canvasRef=r.a.createRef(),n}return Object(N.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.qps.history,t=Math.max.apply(Math,Object(w.a)(e)),a=Math.min.apply(Math,Object(w.a)(e)),n=t-a,r=Object(k.a)(Object(k.a)({},{maintainAspectRatio:!0,responsive:!0,animation:!1,legend:{display:!1},tooltips:{enabled:!1,custom:!1},elements:{point:{radius:0},line:{tension:.33}},scales:{xAxes:[{gridLines:!1,ticks:{display:!1}}],yAxes:[{gridLines:!1,scaleLabel:!1,ticks:{display:!1,suggestedMax:t+.1*n,suggestedMin:a-.1*n}}]}}),this.props.chartOptions),o=Object(k.a)(Object(k.a)({},{type:"line",data:Object(k.a)(Object(k.a)({},{labels:new Array(e.length).fill(null)}),{datasets:[{label:"Today",fill:"start",borderWidth:1.5,backgroundColor:"rgba(50, 200, 205, 0.25)",borderColor:"#32c8cd",data:e}]}),options:r}),this.props.chartConfig);this.chart=new dt.a(this.canvasRef.current,o)}},{key:"render",value:function(){var e=this.props.qps;return this.chart&&this.updateChart(),r.a.createElement(i.d,{className:"pt-0 h-100 stats-small"},r.a.createElement("div",{className:"stats-small__data mx-auto"},r.a.createElement("h6",{className:"stats-small__label text-uppercase text-center mb-0 pt-0 mt-0"},r.a.createElement("b",null,"QPS")),r.a.createElement("h2",{className:"my-3 mx-auto"},e.current),r.a.createElement("h6",{className:"stats-small__label under text-uppercase text-center"},"Queries/Second")),r.a.createElement("canvas",{height:"100",ref:this.canvasRef,className:"stats-small-1"}))}}]),a}(r.a.Component);Ht.defaultProps={label:"New Customers",value:"29",percentage:"2.71%",increase:!1,decrease:!0,chartLabels:[null,null,null,null,null,null,null],chartData:[{label:"Today",fill:"start",borderWidth:1.5,backgroundColor:"rgba(#32c8cd, 0.25)",borderColor:"#32c8cd",data:[1,7,1,3,1,4,8]}]};var Ut=Ht,Gt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).componentWillUnmount=function(){ie.removeListener("update-task",e.getData)},e.getData=function(){var t=ie.getTaskData();e.setState({taskData:t})},e.render=function(){var t=e.state.taskData;return r.a.createElement(mt.a,{fluid:!0,className:"main-content-container px-0"},r.a.createElement("div",{className:"px-4"},r.a.createElement(ke.a,{noGutters:!0,className:"page-header py-4"},r.a.createElement(Be,{title:"Task",subtitle:"Network",className:"text-sm-left mb-3"})),r.a.createElement(ke.a,null,r.a.createElement(Oe.a,{md:"3",className:"mb-4"},r.a.createElement(Rt,{elapsed:t.elapsed})),r.a.createElement(Oe.a,{md:"3",className:"mb-4"},r.a.createElement(Mt,{progress:t.progress})),r.a.createElement(Oe.a,{md:"3",className:"mb-4"},r.a.createElement(Ut,{qps:t.qps})),r.a.createElement(Oe.a,{md:"3",className:"mb-4"},r.a.createElement(Wt,{speed:t.speed}))),r.a.createElement(Bt,{messages:t.messages,bytes:t.bytes,lastUpdate:t.lastUpdateChart})))},e.state={taskData:ie.getTaskData()},ie.on("update-task",e.getData),e}return a}(r.a.Component),Vt=a(587),Yt=[{label:"Host",placeholder:"0.0.0.0",value:"host"},{label:"Port",placeholder:"5000",value:"port"}],Jt=[{label:"Log",placeholder:"/stream/log",value:"log"},{label:"Profile",placeholder:"/stream/profile",value:"profile"},{label:"YAML",placeholder:"/data/yaml",value:"yaml"},{label:"Shutdown",placeholder:"/action/shutdown",value:"shutdown"},{label:"Ready",placeholder:"/status/isready",value:"ready"}];function qt(e){var t=e.colSpan,a=void 0===t?6:t,n=e.label,o=e.value,c=e.placeholder,l=e.onChange;return r.a.createElement(i.g,{md:a,className:"form-group"},r.a.createElement("label",null,n),r.a.createElement(i.o,{placeholder:c,value:o,onChange:l}))}var Qt=function(){var e=Object(n.useState)(ie.getSettings()),t=Object(O.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)({}),l=Object(O.a)(c,2),s=l[0],m=l[1],u=Object(n.useState)(!1),d=Object(O.a)(u,2),p=d[0],g=d[1];function f(){var e=ie.getSettings();o(e),m({})}function h(e,t){var a=Object(k.a)({},s);a[e]=t,m(a)}return Object(n.useEffect)((function(){return ie.on("update-settings",f),function(){ie.removeListener("update-settings",f)}}),[]),r.a.createElement(i.d,{small:!0,className:"mb-4"},r.a.createElement(i.f,{className:"border-bottom"},r.a.createElement("h6",{className:"m-0"},"Connection Preferences")),r.a.createElement(i.e,null,r.a.createElement(i.n,null,r.a.createElement(i.y,{form:!0},Yt.map((function(e){var t=e.label,n=e.placeholder,o=e.value;return r.a.createElement(qt,{key:o,label:t,placeholder:n,value:o in s?s[o]:a[o],onChange:function(e){return h(o,e.target.value)}})}))),r.a.createElement(i.y,null,r.a.createElement(i.g,{xs:"6"},r.a.createElement("strong",{"aria-controls":"collapsed-form","aria-expanded":p,onClick:function(){g(!p)},className:"text-primary d-inline-block mb-3 cursor-pointer"},"Advanced"," ",r.a.createElement("i",{className:"material-icons"},p?"arrow_drop_up":"arrow_drop_down"))),r.a.createElement(i.g,{xs:"6",className:"text-right"},r.a.createElement(i.b,{onClick:function(){var e=Object(k.a)(Object(k.a)({},a),s);b.dispatch({actionType:L.a.SAVE_SETTINGS,payload:e})}},"Save Changes"))),r.a.createElement(Vt.a,{in:p},r.a.createElement("div",{id:"collapsed-form"},r.a.createElement("strong",{className:"text-muted d-block mb-3"},"Endpoints"),r.a.createElement(i.y,{form:!0},Jt.map((function(e){var t=e.label,n=e.placeholder,o=e.value;return r.a.createElement(qt,{key:o,label:t,placeholder:n,value:o in s?s[o]:a[o],onChange:function(e){return h(o,e.target.value)}})}))))))))},zt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).render=function(){return r.a.createElement(mt.a,{fluid:!0,className:"main-content-container px-4"},r.a.createElement(ke.a,{noGutters:!0,className:"page-header py-4"},r.a.createElement(Be,{title:"Settings",subtitle:"Network",className:"text-sm-left mb-3"})),r.a.createElement(Qt,null))},e}return a}(r.a.Component);function $t(e){var t=e.rating,a=e.userRated,n=e.rate,o=parseFloat(Math.round(10*t||0)/10).toFixed(1),c=Kt(o,n);return r.a.createElement("span",{className:"app-rating ".concat(t?"existing":""," ").concat(a?"userRated":""," text-muted")},r.a.createElement("span",{className:"text-faded"},a?"You Rated: ":""),r.a.createElement("span",{className:"rating-num"},t?o:""),c)}var Kt=function(e,t){var a,n=[],o=parseInt(e),c=e-o,l=function(){var e=a;n.push(r.a.createElement("i",{key:a,className:"material-icons",onClick:function(){return t(e)}},"star"))};for(a=0;a<o;++a)l();if(c>=.8){var s=a;n.push(r.a.createElement("i",{key:a++,className:"material-icons",onClick:function(){return t(s)}},"star"))}else if(c>=.25){var i=a;n.push(r.a.createElement("i",{key:a++,className:"material-icons",onClick:function(){return t(i)}},"star_half"))}for(var m=function(e){var o=a;n.push(r.a.createElement("i",{key:a++,className:"material-icons",onClick:function(){return t(o)}},"star_outline"))},u=n.length;u<5;++u)m();return n};function Xt(e){var t,a,n=e.image,o=n.name,c=n.id,s=n.official,i=n.author,m=n.description,u=n.totalStars,d=n.totalRatings,p=n.numReviews;return n.totalStars&&n.totalRatings&&(t=u/d),a=p?p>1?r.a.createElement("span",null,p," reviews"):r.a.createElement("span",null,p," review"):r.a.createElement("span",{className:"text-muted"},"no reviews"),r.a.createElement(l.b,{className:"unstyled-link",to:"/package?id=".concat(c)},r.a.createElement(Xe.a,{className:"clickable mb-4 h-100"},r.a.createElement(Xe.a.Body,{className:"pb-0 mb-0 pt-3"},r.a.createElement(ke.a,null,r.a.createElement(Oe.a,{xs:"12",className:"px-0"},r.a.createElement("div",{className:"app-title"},o,s&&r.a.createElement("span",{title:"Official Package",className:"float-right"},r.a.createElement("i",{className:"ml-2 material-icons verified-icon"},"verified_user"))),r.a.createElement("div",{className:"app-subtitle"},i)),r.a.createElement(Oe.a,{sm:"12",className:"px-0 pt-3 pb-0"},r.a.createElement("div",{className:"description-container"},r.a.createElement("div",{className:"description-overlay"}),r.a.createElement("div",{className:"app-description"},m))))),r.a.createElement(Xe.a.Footer,{className:"pt-0 px-3 pb-3"},a,t&&r.a.createElement($t,{rating:t}))))}var Zt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).componentWillUnmount=function(){ie.removeListener("update-hub",e.getHubImages)},e.getHubImages=function(){var t=ie.getHubImages();e.setState({images:t})},e.sortBy=function(t){e.setState({sortType:t},e.search)},e.setCategory=function(t){e.setState({category:t},e.search)},e.updateSearch=function(t){e.setState({searchQuery:t},e.search)},e.search=function(){var t=e.state,a=t.category,n=t.searchQuery,r=t.sortType;b.dispatch({actionType:L.a.SEARCH_HUB,payload:{category:a,q:n,sort:r}})},e.render=function(){var t=e.state,a=t.images,n=t.sortType,o=t.category,c=t.searchQuery;return r.a.createElement(mt.a,{fluid:!0,className:"main-content-container px-0"},r.a.createElement("div",{className:"px-4"},r.a.createElement(ke.a,{className:"page-header py-4"},r.a.createElement(Be,{title:"Jina Hub",subtitle:"Community",className:"text-sm-left mb-3"}),r.a.createElement(Oe.a,{md:"3",className:"py-sm-2"},r.a.createElement(i.q,null,r.a.createElement(i.r,{type:"prepend"},r.a.createElement(i.s,null,"Categories")),r.a.createElement(i.p,{onChange:function(t){return e.setCategory(t.target.value)},value:o},r.a.createElement("option",{value:"all"},"All Categories"),r.a.createElement("option",{value:"highestRated"},"Search"),r.a.createElement("option",{value:"newest"},"Configurations")))),r.a.createElement(Oe.a,{md:"3",className:"py-sm-2"},r.a.createElement(i.q,null,r.a.createElement(i.r,{type:"prepend"},r.a.createElement(i.s,null,"Sort By")),r.a.createElement(i.p,{onChange:function(t){return e.sortBy(t.target.value)},value:n},r.a.createElement("option",{value:"suggested"},"Suggested"),r.a.createElement("option",{value:"highestRated"},"Highest Rated"),r.a.createElement("option",{value:"newest"},"Newest")))),r.a.createElement(Oe.a,{md:"3",className:"py-sm-2"},r.a.createElement(i.o,{placeholder:"search images...",className:"mb-3 mb-sm-0 ml-auto py-2",value:c,onChange:function(t){return e.updateSearch(t.target.value)}}))),r.a.createElement(ke.a,null,Object.keys(a).map((function(e){return r.a.createElement(Oe.a,{key:e,md:"3",className:"mb-4"},r.a.createElement(Xt,{image:a[e]}))})))))},e.state={images:ie.getHubImages(),sortType:"suggested",category:"all",searchQuery:""},ie.on("update-hub",e.getHubImages),e}return a}(r.a.Component);function ea(e){var t=e.image.buildHistory;return r.a.createElement(i.d,{className:"readme-container mb-4"},r.a.createElement(i.f,{className:"border-bottom d-flex flex-row"},r.a.createElement("h6",{className:"m-0 d-inline-block"},"Build History")),r.a.createElement(i.e,{className:"p-0 build-history"},t&&t.map((function(e,t){var a=new Date(e.created).toLocaleString(),n=parseFloat(e.size/1e6).toFixed(2);return r.a.createElement("div",{key:t,className:"user-activity__item pr-3 py-3"},r.a.createElement("div",{className:"user-activity__item__icon mt-2"},r.a.createElement("i",{className:"material-icons"},"build")),r.a.createElement("div",{className:"user-activity__item__content"},r.a.createElement("span",{className:"text-light"},a),r.a.createElement("p",null,"[",e.os,"/",e.architecture,"] ",n," MB")))}))))}function ta(e){var t=e.image;return r.a.createElement(i.d,{className:"readme-container mb-4"},r.a.createElement(i.f,{className:"border-bottom d-flex flex-row"},r.a.createElement("h6",{className:"m-0 d-inline-block"},"Image Details")),r.a.createElement(i.e,{className:"pt-0 pb-2"},r.a.createElement(i.y,{className:"border-bottom py-2"},r.a.createElement(i.g,null,"Name"),r.a.createElement(i.g,null,t.name)),r.a.createElement(i.y,{className:"border-bottom py-2"},r.a.createElement(i.g,null,"Version"),r.a.createElement(i.g,null,t.version)),r.a.createElement(i.y,{className:"border-bottom py-2"},r.a.createElement(i.g,null,"Author"),r.a.createElement(i.g,null,t.author)),r.a.createElement(i.y,{className:"border-bottom py-2"},r.a.createElement(i.g,null,"Description"),r.a.createElement(i.g,null,t.description)),r.a.createElement(i.y,{className:"border-bottom py-2"},r.a.createElement(i.g,null,"Documentation"),r.a.createElement(i.g,null,r.a.createElement("a",{href:t.documentation,target:"_blank",rel:"noopener noreferrer"},t.documentation))),r.a.createElement(i.y,{className:"border-bottom py-2"},r.a.createElement(i.g,null,"Source"),r.a.createElement(i.g,null,r.a.createElement("a",{href:t.source,target:"_blank",rel:"noopener noreferrer"},t.source))),r.a.createElement(i.y,{className:"border-bottom py-2"},r.a.createElement(i.g,null,"License"),r.a.createElement(i.g,null,t.license)),r.a.createElement(i.y,{className:"border-bottom py-2"},r.a.createElement(i.g,null,"Vendor"),r.a.createElement(i.g,null,t.vendor)),r.a.createElement(i.y,{className:"py-2"},r.a.createElement(i.g,null,"URL"),r.a.createElement(i.g,null,r.a.createElement("a",{href:t.url,target:"_blank",rel:"noopener noreferrer"},t.url)))))}function aa(e){var t=e.readme,a=e.documentation;return r.a.createElement(i.d,{className:"readme-container mb-4"},r.a.createElement(i.f,{className:"border-bottom d-flex flex-row"},r.a.createElement("h6",{className:"m-0 d-inline-block"},"README.MD"),r.a.createElement("div",{className:"flex-fill d-inline-block"}),r.a.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"cursor-pointer text-primary"},r.a.createElement("i",{className:"fab fa-github"})," View on GitHub")),r.a.createElement(i.e,null,t?r.a.createElement("div",{className:"markup",dangerouslySetInnerHTML:{__html:t}}):r.a.createElement("h2",{className:"text-muted text-center py-4"},"No Readme Found")))}var na=a(588),ra=a(585);function oa(e){var t=e.image,a=e.copyCode,n=t.repoTags[t.repoTags.length-1],o=["from jina.flow import Flow\nf = Flow().add(name='my-pod', image='".concat(n,"')"),"from jina.flow import Flow\n# assuming you have a running gateway on 192.168.0.123:45678\nf = Flow().add(name='my-pod', image='".concat(n,"', yaml_path='my.yml')"),"from jina.flow import Flow\n# assuming you have a running gateway on 192.168.0.123:45678\nf = Flow().add(name='my-pod', image='".concat(n,"', host='192.168.0.123', port_grpc=45678)"),'!Flow\npods:\n  my_pod1:\n    image: "'.concat(n,'"'),"jina pod --image ".concat(n),"docker run -p 55555:55555 -p 55556:55556 ".concat(n," --port-in 55555 --port-out 55556"),"docker run -v $(pwd)/my.yml:/my.yml ".concat(n," --yaml-path /my.yml")];return r.a.createElement(i.d,{className:"mb-4"},r.a.createElement(i.f,{className:"p-3 border-bottom d-flex flex-row"},r.a.createElement("h6",{className:"m-0 d-inline-block"},"Usage")),r.a.createElement(i.e,{className:"py-2 px-3 pt-4 code-usage"},r.a.createElement("p",{className:"mb-1"},"Use this image in Flow API"),r.a.createElement(na.a,{language:"python",style:ra.a,onClick:function(){return a(o[0])}},o[0]),r.a.createElement("p",{className:"mb-1 mt-4"},"Use this image in Flow API and override YAML"),r.a.createElement(na.a,{language:"python",style:ra.a,onClick:function(){return a(o[1])}},o[1]),r.a.createElement("p",{className:"mb-1 mt-4"},"Use this image remotely in Flow API"),r.a.createElement(na.a,{language:"python",style:ra.a,onClick:function(){return a(o[2])}},o[2]),r.a.createElement("p",{className:"mb-1 mt-4"},"Use this image in Flow YAML"),r.a.createElement(na.a,{language:"yaml",style:ra.a,onClick:function(){return a(o[3])}},o[3]),r.a.createElement("p",{className:"mb-1 mt-4"},"Use this image in Jina CLI"),r.a.createElement(na.a,{language:"bash",style:ra.a,onClick:function(){return a(o[4])}},o[4]),r.a.createElement("p",{className:"mb-1 mt-4"},"Use this image in Docker CLI"),r.a.createElement(na.a,{language:"bash",style:ra.a,onClick:function(){return a(o[5])}},o[5]),r.a.createElement("p",{className:"mb-1 mt-4"},"Use this image in Docker CLI and override YAML"),r.a.createElement(na.a,{language:"bash",style:ra.a,onClick:function(){return a(o[6])}},o[6])))}function ca(e){var t=e.review;return r.a.createElement(i.d,{className:"readme-container mb-4"},r.a.createElement(i.f,{className:"border-bottom d-flex flex-row"},r.a.createElement("h6",{className:"m-0 d-inline-block"},t.username),r.a.createElement("div",{className:"flex-fill d-inline-block"})),r.a.createElement(i.e,{className:"py-3"},t.content))}function la(e){var t=e.reviews,a=e.newReview;return r.a.createElement("div",null,r.a.createElement("div",{className:"border-bottom d-flex flex-row mb-4"},r.a.createElement("h3",{className:"flex-fill"},"Reviews"),r.a.createElement("div",null,r.a.createElement(i.b,{onClick:a},r.a.createElement("i",{className:"material-icons mr-2"},"add_comment"),"New Review"))),t.length>0?t.map((function(e,t){return r.a.createElement(ca,{key:t,review:e})})):r.a.createElement("h2",{className:"text-muted text-center py-4"},"No Reviews"))}function sa(e){var t=e.title,a=e.content,n=e.icon,o=e.theme,c=e.link;return r.a.createElement("a",{className:"unstyled-link",href:c,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(Xe.a,{className:"h-100"},r.a.createElement(Xe.a.Body,{className:"pt-3"},r.a.createElement(ke.a,null,r.a.createElement(Oe.a,{xs:"8",className:"pr-0"},r.a.createElement("h4",null,t),a),r.a.createElement(Oe.a,{xs:"4",className:"pl-0"},r.a.createElement("h1",{className:"mt-4 ml-4"},r.a.createElement("span",{className:"".concat(n," log-").concat(o)})))))))}var ia=function(){return r.a.createElement(i.i,{fluid:!0,className:"main-content-container px-4"},r.a.createElement(i.y,{noGutters:!0,className:"page-header py-4"},r.a.createElement(Be,{title:"Resources",subtitle:"Jina.ai",className:"text-sm-left mb-3"})),r.a.createElement(i.y,null,r.a.createElement(i.g,{md:"3",className:"mb-4"},r.a.createElement(sa,{title:"Jina 101",content:"Understanding all key concepts of Jina in 3 minutes!",link:"https://101.jina.ai",icon:"fas fa-egg",theme:"warning"})),r.a.createElement(i.g,{md:"3",className:"mb-4"},r.a.createElement(sa,{title:"Jina Documentations",content:"The best way to learn Jina in depth.",link:"https://docs.jina.ai",icon:"fas fa-book",theme:"primary"})),r.a.createElement(i.g,{md:"3",className:"mb-4"},r.a.createElement(sa,{title:'Jina "Hello World"',content:"A simple demo of image neural search for Fashion-MNIST.",link:"https://github.com/jina-ai/jina#jina-hello-world-",icon:"fas fa-globe-europe",theme:"error"})),r.a.createElement(i.g,{md:"3",className:"mb-4"},r.a.createElement(sa,{title:"Visit us on Github!",content:"Explore more exciting open-source projects from us.",link:"https://opensource.jina.ai",icon:"fab fa-github",theme:"info"})),r.a.createElement(i.g,{md:"3",className:"mb-4"},r.a.createElement(sa,{title:"We are hiring!",content:"Join us and build the next neural search eco system!",link:"https://www.linkedin.com/company/jinaai/jobs/",icon:"fab fa-linkedin",theme:"linkedin"}))))},ma=[{path:"/",exact:!0,layout:Ee,component:function(){return r.a.createElement(s.a,{to:"/logs"})}},{path:"/logs",layout:Re,component:function(){var e=Object(n.useState)([]),t=Object(O.a)(e,2),a=t[0],o=t[1];function c(){var e=ie.getLogs();o(Object(w.a)(e))}return Object(n.useEffect)((function(){return ie.on("update-logs",c),function(){return ie.removeListener("update-logs",c)}}),[]),r.a.createElement(mt.a,{fluid:!0,className:"main-content-container px-0"},r.a.createElement("div",{className:"px-4"},r.a.createElement(ke.a,{noGutters:!0,className:"page-header py-4"},r.a.createElement(Be,{title:"Log Stream",subtitle:"Network",className:"text-sm-left mb-3"})),r.a.createElement(ke.a,null,r.a.createElement(Oe.a,{md:"10",className:"mb-4"},r.a.createElement(ft,null)),r.a.createElement(Oe.a,{md:"2",className:"mb-4"},r.a.createElement(vt,null))),r.a.createElement(It,{data:a,showLogDetails:Ft})))}},{path:"/flow",layout:Re,component:it},{path:"/task",layout:Re,component:Gt},{path:"/settings",layout:Re,component:zt},{path:"/help",layout:Re,component:ia},{path:"/home",layout:Re,component:ia},{path:"/hub",layout:Re,component:Zt},{path:"/package",layout:Re,component:function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.getImageData()},e.componentWillUnmount=function(){ie.removeListener("update-hub",e.getImageData)},e.getImageData=Object(y.a)(E.a.mark((function t(){var a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ie.getHubImage(e.state.imageId);case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={};case 5:a=t.t0,e.setState({imageData:a,loading:!1});case 7:case"end":return t.stop()}}),t)}))),e.rate=function(t){var a=e.state.imageId;b.dispatch({actionType:L.a.POST_RATING,payload:{imageId:a,stars:t}})},e.copyCode=function(e){P(e),b.dispatch({actionType:L.a.SHOW_BANNER,payload:["Content copied to clipboard","success"]})},e.newReview=function(){var t=e.state.imageData.id;b.dispatch({actionType:L.a.SHOW_MODAL,payload:{modal:"review",modalParams:{imageId:t}}})},e.render=function(){var t,a=e.state,n=a.imageData,o=a.loading,c=n.name,l=n.readmeHTML,s=n.documentation,i=n.totalStars,m=n.totalRatings,u=n.userRated,d=n.reviews;return i&&m&&(t=i/m),r.a.createElement(mt.a,{fluid:!0,className:"main-content-container px-0"},o?r.a.createElement("div",{className:"error"},r.a.createElement("div",{className:"loader"})):r.a.createElement("div",{className:"px-4"},r.a.createElement(ke.a,{noGutters:!0,className:"page-header py-4"},r.a.createElement(Be,{title:c,subtitle:"Image",className:"text-sm-left mb-3"}),r.a.createElement(Oe.a,{md:"6"}),r.a.createElement(Oe.a,{md:"3",className:"py-sm-2"},r.a.createElement("h3",null,r.a.createElement($t,{rating:u||t,rate:e.rate,userRated:u})))),r.a.createElement(ke.a,null,r.a.createElement(Oe.a,{md:"6"},r.a.createElement(oa,{image:n,copyCode:e.copyCode}),r.a.createElement(ta,{image:n}),r.a.createElement(ea,{image:n})),r.a.createElement(Oe.a,{md:"6"},r.a.createElement(aa,{readme:l,documentation:s}),r.a.createElement(la,{reviews:d,newReview:e.newReview})))))};var n=window.location.hash,o=n.substring(n.indexOf("?"),n.length),c=new URLSearchParams(o).get("id");return e.state={imageId:c,loading:!1,imageData:{reviews:[],repoTags:[]}},ie.on("update-hub",e.getImageData),e}return a}(r.a.Component)},{path:"/login",layout:Re,component:function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).componentDidMount=function(){var e=window.location.href;if(e.indexOf("code")>0){var t=e.substring(e.indexOf("code")+5,e.length);window.location="".concat(X.hubURL,"/auth/github/callback?code=").concat(t)}},e.render=function(){return r.a.createElement(i.i,{fluid:!0,className:"main-content-container px-0"},r.a.createElement(i.y,{noGutters:!0,className:"h-100"},r.a.createElement(i.g,{lg:"3",md:"5",className:"auth-form mx-auto"},r.a.createElement(i.d,null,r.a.createElement(i.e,null,r.a.createElement("img",{className:"auth-form__logo d-table mx-auto mb-3",src:"/jina-light.svg",style:{maxWidth:"100px"},alt:"Jina"}),r.a.createElement("h5",{className:"auth-form__title text-center mb-4"},"Log in"),r.a.createElement("a",{href:"".concat(X.hubURL,"/auth/github"),id:"github-button",className:"btn btn-block btn-social btn-github"},r.a.createElement("i",{className:"fab fa-github"})," Sign in with GitHub"))))))},e}return a}(r.a.Component)}],ua=a(114);ua.a.initialize(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_GAID||"UA-164627626-1");var da=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=function(e){ua.a.set(Object(k.a)({page:e},t)),ua.a.pageview(e)},o=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_BASENAME||"",c=function(t){Object(u.a)(c,t);var n=Object(d.a)(c);function c(){return Object(m.a)(this,c),n.apply(this,arguments)}return Object(N.a)(c,[{key:"componentDidMount",value:function(){var e=this.props.location.pathname+this.props.location.search;a("".concat(o).concat(e))}},{key:"componentDidUpdate",value:function(e){var t=e.location.pathname+e.location.search,n=this.props.location.pathname+this.props.location.search;t!==n&&a("".concat(o).concat(n))}},{key:"render",value:function(){return r.a.createElement(e,this.props)}}]),c}(n.Component);return c},pa=(a(564),a(565),a(566),a(203));function ga(e){var t=e.error,a=e.resetErrorBoundary;return r.a.createElement(mt.a,{fluid:!0,className:"main-content-container p-5"},r.a.createElement(ke.a,{noGutters:!0,className:"page-header py-4"},r.a.createElement(Be,{title:"Error",subtitle:"This should not have happened",className:"text-sm-left my-3"})),r.a.createElement(ke.a,{noGutters:!0,className:"page-header py-4"},r.a.createElement(Oe.a,{xs:"12",sm:"3"},r.a.createElement("p",null,"Something went wrong:"),r.a.createElement("pre",null,r.a.createElement("code",{className:"text-warning"},t.message)))),r.a.createElement(ke.a,{noGutters:!0,className:"page-header"},r.a.createElement(Oe.a,null,r.a.createElement(i.b,{onClick:a},"Try again"))))}var fa=function(){return r.a.createElement(l.a,{basename:"/"},r.a.createElement("div",null,ma.map((function(e,t){return r.a.createElement(s.b,{key:t,path:e.path,exact:e.exact,component:da((function(t){return r.a.createElement(e.layout,t,r.a.createElement(pa.ErrorBoundary,{FallbackComponent:ga,onReset:function(){return ie.init()}},r.a.createElement(e.component,t)))}))})}))))},ha=a(204),ba={palette:{background:{default:"#FFFFFF"},primary:{main:"#009999"},secondary:{main:"#FFCC66"},warning:{main:"#FFCC66"},error:{main:"#ff6666"},success:{main:"#009999"},info:{main:"#32C8CD"}}};c.a.render(r.a.createElement(ha.a,{theme:ba},r.a.createElement(fa,null)),document.getElementById("root"))},60:function(e,t){e.exports={timeout:15e3,hubURL:"https://hub.jina.ai"}}},[[210,1,2]]]);
//# sourceMappingURL=main.6e0deb08.chunk.js.map